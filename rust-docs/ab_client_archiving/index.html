<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Consensus archiver responsible for archival of blockchain history, it is driven by the block import pipeline."><title>ab_client_archiving - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="ab_client_archiving" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (9e79395f9 2026-02-10)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../static.files/storage-f9617a14.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-f7c3ffd8.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate ab_client_archiving</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../ab_client_archiving/index.html">ab_<wbr>client_<wbr>archiving</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><h1>Crate <span>ab_<wbr>client_<wbr>archiving</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/ab_client_archiving/lib.rs.html#1-893">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Consensus archiver responsible for archival of blockchain history, it is driven by the block
import pipeline.</p>
<p>Implements archiving process in that converts blockchain history (blocks) into archived history
(segments and pieces).</p>
<p>The main entry point here is <a href="fn.create_archiver_task.html" title="fn ab_client_archiving::create_archiver_task"><code>create_archiver_task</code></a> that will create a task, which while
driven will perform the archiving itself.</p>
<p>Archiving is triggered by block importing notification and tries to archive the block at
<a href="ab_client_consensus_common::ConsensusConstants::confirmation_depth_k"><code>ConsensusConstants::confirmation_depth_k</code></a>
depth from the block being imported. Block import will then wait for archiver to acknowledge
processing, which is necessary for ensuring that when the next block is imported, it will
contain a segment header of the newly archived block (must happen exactly in the next block).</p>
<p>Archiving itself will also wait for acknowledgement by various subscribers before proceeding,
which includes farmer subscription, in case of reference implementation via RPC.</p>
<p>Known segment headers contain all known (including future in case of syncing) segment headers.
It is available to other parts of the protocol that need to know what the correct archival
history of the blockchain looks like through [<code>ChainInfo</code>]. For example, it is used during node
sync and farmer plotting to verify pieces of archival history received from other network
participants.</p>
<p><a href="fn.recreate_genesis_segment.html" title="fn ab_client_archiving::recreate_genesis_segment"><code>recreate_genesis_segment</code></a> is a bit of a hack and is useful for deriving of the genesis
segment that is a special case since we don’t have enough data in the blockchain history itself
during genesis to do the archiving.</p>
<p><a href="fn.encode_block.html" title="fn ab_client_archiving::encode_block"><code>encode_block</code></a> and <a href="fn.decode_block.html" title="fn ab_client_archiving::decode_block"><code>decode_block</code></a> are symmetric encoding/decoding functions turning
Blocks into bytes and back.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.ArchivedSegmentNotification.html" title="struct ab_client_archiving::ArchivedSegmentNotification">Archived<wbr>Segment<wbr>Notification</a></dt><dd>Notification with a new archived segment that was just archived</dd><dt><a class="struct" href="struct.ObjectMappingNotification.html" title="struct ab_client_archiving::ObjectMappingNotification">Object<wbr>Mapping<wbr>Notification</a></dt><dd>Notification with incrementally generated object mappings for a block (and any previous block
continuation)</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ArchiverTaskError.html" title="enum ab_client_archiving::ArchiverTaskError">Archiver<wbr>Task<wbr>Error</a></dt><dd>Archiver task error</dd><dt><a class="enum" href="enum.CreateObjectMappings.html" title="enum ab_client_archiving::CreateObjectMappings">Create<wbr>Object<wbr>Mappings</a></dt><dd>Whether to create object mappings.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.create_archiver_task.html" title="fn ab_client_archiving::create_archiver_task">create_<wbr>archiver_<wbr>task</a></dt><dd>Create an archiver task.</dd><dt><a class="fn" href="fn.decode_block.html" title="fn ab_client_archiving::decode_block">decode_<wbr>block</a></dt><dd>Symmetrical to <a href="fn.encode_block.html" title="fn ab_client_archiving::encode_block"><code>encode_block()</code></a>, used to decode previously encoded blocks</dd><dt><a class="fn" href="fn.encode_block.html" title="fn ab_client_archiving::encode_block">encode_<wbr>block</a></dt><dd>Encode block for archiving purposes</dd><dt><a class="fn" href="fn.recreate_genesis_segment.html" title="fn ab_client_archiving::recreate_genesis_segment">recreate_<wbr>genesis_<wbr>segment</a></dt><dd>Derive the genesis segment on demand, returns <code>Ok(None)</code> in case the genesis block was already
pruned</dd></dl></section></div></main></body></html>