<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A transaction handler interface prototype"><title>TxHandler in ab_contracts_standards::tx_handler - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="ab_contracts_standards" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0-nightly (6380899f3 2025-10-18)" data-channel="nightly" data-search-js="search-8d3311b9.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">TxHandler</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../ab_contracts_standards/index.html">ab_<wbr>contracts_<wbr>standards</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">TxHandler</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.authorize" title="authorize">authorize</a></li><li><a href="#tymethod.execute" title="execute">execute</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-ContractTraitDefinition-for-dyn+TxHandler" title="ContractTraitDefinition">ContractTraitDefinition</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In ab_<wbr>contracts_<wbr>standards::<wbr>tx_<wbr>handler</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">ab_contracts_standards</a>::<wbr><a href="index.html">tx_handler</a></div><h1>Trait <span class="trait">TxHandler</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/ab_contracts_standards/tx_handler.rs.html#14-69">Source</a> </span></div><pre class="rust item-decl"><code>pub trait TxHandler {
    // Required methods
    fn <a href="#tymethod.authorize" class="fn">authorize</a>(
        env: &amp;Env&lt;'_&gt;,
        header: &amp;TransactionHeader,
        read_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
        write_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
        payload: &amp;<a class="type" href="type.TxHandlerPayload.html" title="type ab_contracts_standards::tx_handler::TxHandlerPayload">TxHandlerPayload</a>,
        seal: &amp;<a class="type" href="type.TxHandlerSeal.html" title="type ab_contracts_standards::tx_handler::TxHandlerSeal">TxHandlerSeal</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ContractError&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.execute" class="fn">execute</a>(
        env: &amp;mut Env&lt;'_&gt;,
        header: &amp;TransactionHeader,
        read_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
        write_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
        payload: &amp;<a class="type" href="type.TxHandlerPayload.html" title="type ab_contracts_standards::tx_handler::TxHandlerPayload">TxHandlerPayload</a>,
        seal: &amp;<a class="type" href="type.TxHandlerSeal.html" title="type ab_contracts_standards::tx_handler::TxHandlerSeal">TxHandlerSeal</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ContractError&gt;
       <span class="where">where Self: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A transaction handler interface prototype</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.authorize" class="method"><a class="src rightside" href="../../src/ab_contracts_standards/tx_handler.rs.html#40-47">Source</a><h4 class="code-header">fn <a href="#tymethod.authorize" class="fn">authorize</a>(
    env: &amp;Env&lt;'_&gt;,
    header: &amp;TransactionHeader,
    read_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
    write_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
    payload: &amp;<a class="type" href="type.TxHandlerPayload.html" title="type ab_contracts_standards::tx_handler::TxHandlerPayload">TxHandlerPayload</a>,
    seal: &amp;<a class="type" href="type.TxHandlerSeal.html" title="type ab_contracts_standards::tx_handler::TxHandlerSeal">TxHandlerSeal</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ContractError&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Verify a transaction.</p>
<p>Each transaction consists of a header, payload, read/write slots and a seal.</p>
<p>Payload contains 16-byte aligned bytes, which typically represent method calls to be
executed, but the serialization format for it is contract-specific.</p>
<p>Seal typically contains nonce and a signature over transaction header and payload, used for
checking whether to allow execution of methods in the payload argument.</p>
<p>In the end, it is up to the contract implementing this trait to interpret both payload and
seal in any way desired.</p>
<p>This method is called by execution environment is used for transaction authorization. It is
expected to do a limited amount of work before deciding whether execution is allowed or not.
Once authorization is granted (by returning a non-error result), execution environment will
deduct gas from the contract’s balance and call <a href="trait.TxHandler.html#tymethod.execute" title="associated function ab_contracts_standards::tx_handler::TxHandler::execute"><code>TxHandler::execute()</code></a> for actual
transaction execution.</p>
<p>It is up to the host environment to decide how much work is allowed here when verifying
transaction in the transaction pool as for DoS protection. As a result, requiring too much
work may prevent transaction from being included in the block at all (unless user authors
the block and include the transaction themselves). Once a transaction is in the block, there
are no limits to the amount of work here except the ability to pay for gas.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.execute" class="method"><a class="src rightside" href="../../src/ab_contracts_standards/tx_handler.rs.html#61-68">Source</a><h4 class="code-header">fn <a href="#tymethod.execute" class="fn">execute</a>(
    env: &amp;mut Env&lt;'_&gt;,
    header: &amp;TransactionHeader,
    read_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
    write_slots: &amp;<a class="type" href="type.TxHandlerSlots.html" title="type ab_contracts_standards::tx_handler::TxHandlerSlots">TxHandlerSlots</a>,
    payload: &amp;<a class="type" href="type.TxHandlerPayload.html" title="type ab_contracts_standards::tx_handler::TxHandlerPayload">TxHandlerPayload</a>,
    seal: &amp;<a class="type" href="type.TxHandlerSeal.html" title="type ab_contracts_standards::tx_handler::TxHandlerSeal">TxHandlerSeal</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, ContractError&gt;<div class="where">where
    Self: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h4></section></summary><div class="docblock"><p>Execute previously verified transaction.</p>
<p><em>Execution environment will call this method with <code>env.caller()</code> set to <code>Address::NULL</code>,
which is very important to check!</em> Since there is no code deployed at <code>Address::NULL</code>, only
(trusted) execution environment is able to make such a call.</p>
<p>Getting to this stage means that verification succeeded and except charging for gas, no
other state changes were made since then. If necessary, it is still possible to do
additional checks that would be too expensive or not possible to do in
<a href="trait.TxHandler.html#tymethod.authorize" title="associated function ab_contracts_standards::tx_handler::TxHandler::authorize"><code>TxHandler::authorize()</code></a>. It is also important to implement a transaction replay
protection mechanism such as nonce increase or similar.</p>
</div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-ContractTraitDefinition-for-dyn+TxHandler" class="impl"><a class="src rightside" href="../../src/ab_contracts_standards/tx_handler.rs.html#13">Source</a><a href="#impl-ContractTraitDefinition-for-dyn+TxHandler" class="anchor">§</a><h3 class="code-header">impl ContractTraitDefinition for dyn <a class="trait" href="trait.TxHandler.html" title="trait ab_contracts_standards::tx_handler::TxHandler">TxHandler</a></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedconstant.METADATA" class="associatedconstant trait-impl"><a class="src rightside" href="../../src/ab_contracts_standards/tx_handler.rs.html#13">Source</a><a href="#associatedconstant.METADATA" class="anchor">§</a><h4 class="code-header">const <a class="constant">METADATA</a>: &amp;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>]</h4></section></summary><div class="docblock"><p>Trait metadata, see <a href="::ab_contracts_macros::__private::ContractMetadataKind"><code>ContractMetadataKind</code></a> for encoding details</p>
</div></details></div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/ab_contracts_standards/tx_handler/trait.TxHandler.js" async></script></section></div></main></body></html>