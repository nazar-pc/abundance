<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Project Abundance</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Project Abundance</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/nazar-pc/abundance/tree/main/website/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="status-quo"><a class="header" href="#status-quo">Status quo</a></h1>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>State-of-the-art blockchains are yet to resolve the Blockchain Trilemma</p>
</div>
<p>Bitcoin and Ethereum de-facto lost decentralization due to their consensus algorithm, they are also very slow.</p>
<p>The majority of modern blockchains today use a variation of Proof-of-Stake consensus, meaning they are permissioned and
inherently not scalable to unbounded number of participants. Those that are based on Proof-of-Work are arguably not
secure to begin with, regardless of what algorithm they are using due to how cheap and easy it is to purchase compute in
large quantities today to attach the blockchain.</p>
<p>There are many blockchains that claim to be scalable, but all of them have a glass ceiling and are unable to scale
bandwidth, storage and compute sub-linearly with unbounded number of participants. Those that do not support sharding
are not scalable by definition, those that are sharded have other inherent limitations that prevent unbounded growth.</p>
<p>Only security is the property arguably achieved by many blockchains, but it is also debatable how real or useful it is
without two other properties.</p>
<h1 id="-project-abundance-"><a class="header" href="#-project-abundance-">🚧 Project Abundance 🚧</a></h1>
<p>The goal here is to find a way to remove existing bottlenecks and unleash the full power of the blockchain.</p>
<p>We need <strong>ABUNDANCE</strong>:</p>
<ul>
<li>Abundance of consensus participation
<ul>
<li>Without practical limits</li>
</ul>
</li>
<li>Abundance of bandwidth, storage and compute
<ul>
<li>With increased consensus participation, it must be possible to process more transactions, persist larger history
and do more computation without practical limits</li>
</ul>
</li>
<li>Abundance of developers
<ul>
<li>Standard programming languages with familiar tooling, standard and efficient execution environment, infrastructure
that allows for a single app to scale to the capacity of the blockchain itself</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="consensus"><a class="header" href="#consensus">Consensus</a></h1>
<p>While <a href="https://wikipedia.org/wiki/Proof_of_work">Proof-of-Work</a> and <a href="https://wikipedia.org/wiki/Proof_of_stake">Proof-of-Stake</a> have solidified as primary ways to achieve consensus in blockchains, they
both inevitably lead to centralization and potentially to reduction of security.</p>
<p>With Proof-of-Work, this is primarily driven by the need to access to exotic hardware and cheap electricity, which
limits the number of people who can participate. With the growth of the network and difficulty increase, it also becomes
impractical for small miners to participate without mining pools due to infrequent and unpredictable rewards. Another
complication is the existence of services like Nicehash that allow to buy large amounts of compute for limited amounts
of time on an open market, which makes it very practical to own the network and in case of anything that is smaller than
<a href="https://bitcoin.org">Bitcoin</a> arguably fairly inexpensive.</p>
<div class="mdbook-alerts mdbook-alerts-warning">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  warning
</p>
<p>As the result majority of Proof-of-Work blockchains are neither decentralized nor secure in practice.</p>
</div>
<p>With Proof-of-Stake currently staked owners of tokens get richer every day, which arguably makes it a permissioned
system. Due to being permissioned and requiring on-chain registration before participation, most Proof-of-Stake
implementations have to substantially limit the number of consensus participants by imposing things like minimum stake
amount as well as only selecting a subset of validators to be active at any time. Due to the nature of consensus
implementation, it is also important for consensus nodes to stay online, so those unable to are typically being punished
for it on top of simply having their tokens locked and not receiving rewards. This also leads to pooling and
centralization. Blockchains like <a href="https://polkadot.com">Polkadot</a> support nominated staking that improves scalability of consensus
participation
to some degree, but it is not a full replacement for being able to participate in consensus individually.</p>
<div class="mdbook-alerts mdbook-alerts-warning">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  warning
</p>
<p>As the result majority of Proof-of-Stake networks arguably are not really that decentralized in a sense of supporting
millions or even billions of consensus participants.</p>
</div>
<h2 id="proof-of-space"><a class="header" href="#proof-of-space">Proof-of-Space</a></h2>
<p>The alternative to above that is not talked about quite as much is <a href="https://en.wikipedia.org/wiki/Proof_of_space">Proof-of-Space</a>. There are different variations of
it, but a shared trait between them all is permissionless participation with low energy usage requirements, while also
using the resource that is generic, widely distributed and abundant: disk storage.</p>
<p>The most prominent example of Proof-of-Space consensus is probably <a href="https://www.chia.net/">Chia</a>. Chia is essentially an energy efficient
version of Bitcoin that wastes disk space to store random data just like Bitcoin wastes compute to calculate hashes. It
also happens to suffer, just like almost every other Proof-of-Space blockchain from <a href="https://academy.autonomys.xyz/subspace-protocol/advancing-blockchain">Farmer’s dilemma</a>, which makes
incentive compatibility a challenge.</p>
<p>While this is an improvement over Proof-of-Work, it turns out it could be even better.</p>
<h2 id="proof-of-archival-storage"><a class="header" href="#proof-of-archival-storage">Proof-of-Archival-Storage</a></h2>
<p><a href="https://academy.autonomys.xyz/subspace-protocol/consensus">Proof-of-Archival-Storage</a> is a flavor of Proof-of-Space, more specifically Proof-of-Storage, that instead of filling
disks with random data stores the history of the blockchain itself. This not only resolves Farmer’s dilemma, but allows
for a few interesting side effects:</p>
<ul>
<li>On-chain storage cost no longer needs to be hardcoded, it can be driven by on-chain Automated Market Maker thanks to
ability to measure not only demand for storage (size of blockchain history), but also supply (space pledged to the
network by farmers), resulting in approximation of real-world price of the hardware, regardless of the token price</li>
<li>The history of the blockchain can’t be lost regardless of how large it becomes, in an incentive-compatible and
sustainable way, as long as the blockchain is operational</li>
<li>Blockchain effectively becomes a Distributed Storage Network since any piece of data uploaded to the network can later
be retrieved from the network of farmers</li>
</ul>
<p>To make pools even more interesting to farmers <a href="https://www.autonomys.xyz/">Autonomys Network</a> was deployed with a voting mechanism built-in that
increases the frequency of rewards 10x comparing to just having block rewards, making it possible to receive weekly
rewards for even relatively small farmers.</p>
<div class="mdbook-alerts mdbook-alerts-important">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  important
</p>
<p>As a result, Proof-of-Archival-Storage seems to be the closest ideal consensus mechanism that is both permissionless,
distributed and secure.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="everything-is-a-contract"><a class="header" href="#everything-is-a-contract">Everything is a contract</a></h1>
<p>Every contract has an address, which is just a monotonically increasing number. This is in contrast to many blockchains
where address might be derived from a public key (in case of end user wallet) or code (of “smart contracts”). There is
no separate notion of Externally Owned Account (EOA) like in Ethereum, end user wallets are also just contracts.</p>
<p>The address is allocated on contract creation and doesn’t change regardless of how the contract evolves in the future.
This means that externally, all contracts essentially look the same regardless of what they represent. This enables a
wallet contract to change its logic from verifying a single signature to multisig to 2FA to use a completely different
cryptography in the future, all while retaining its address/identity.</p>
<p>This not only includes contracts created/deployed by users/developers, but also some fundamental blockchain features.
For example, there are system contracts like <code>code</code> and <code>state</code>. In most blockchains code of the contract is stored in a
special location by the node and retrieved before processing a <a href="Execution_environment/Transactions_overview#transactions-abstraction">transaction</a>. Here, <code>code</code> contract manages code of all
contracts instead and deployment of a new contract is a call to system <code>code</code> contract. There is no special host
function provided by the node. <code>code</code> contract will store the code in the corresponding slot of the newly created
contract (see <a href="Execution_environment/Contracts_overview.html#storage-model">Storage model</a> below for more details), which can be read by execution environment (which knows about
system contracts).</p>
<p>A few examples of contracts:</p>
<ul>
<li>a wallet (can be something simple that only checks signature or a complex smart wallet with multisig/2FA)</li>
<li>utility functions that offer some shared logic like exotic signature verification</li>
<li>various kinds of tokens, including native token of the blockchain itself</li>
<li>even fundamental pieces of logic that allocate addresses and deploy other contracts are contracts themselves</li>
</ul>
<p>It’ll be clear later how far this concept can be stretched, but so far the potential is quite high to make as many
things as possible “just a contract.”</p>
<p>This helps to reduce the number of special cases for built-in functions vs. something that blockchain user can deploy.</p>
<h1 id="storage-model"><a class="header" href="#storage-model">Storage model</a></h1>
<p>All storage owned by a contract is organized into a container that has slots inside. It forms a tree with the root
being the root of contract’s storage, which can be used to generation inclusion/exclusion proofs when processing
transactions (see <a href="Execution_environment/Transactions_overview#transaction-processing">Transaction processing</a>). Having a per-contract tree with storage proofs allows consensus nodes to
not be required to store the state of all contracts, just their storage roots. This is unlike many other blockchains
where contract may have access to a form of key-value database.</p>
<p>Each slot is managed by exactly one of the existing contracts and can only be read or modified by that contract.
Contract’s code and state are also slots managed by contracts (system contracts), even though developer-facing API might
abstract it in a more friendly way. It is possible for a contract to manage one of its slots too, like when a token
contract owns some number of its own tokens.</p>
<p>A bit wrong, but hopefully useful analogy is cloud server. A server is owned by a provider, but managed by a customer.
A provider typically doesn’t have remote access to the server customer orders, all changes to the software that server
runs are done by the customer. Similarly, slots owned by a contract are managed by other contracts.</p>
<p>In contrast to most other blockchains by “state” we refer to the inherent state of the contract itself, rather than
things that might belong to end-users. The right mental model is to think of it as a global state of a contract.</p>
<p>Let’s take a generic fungible token as an example. System <code>state</code> contract will manage its state, stored in
corresponding slot owned by the token contract. State will contain things like total supply and potentially useful
metadata like number of decimal places and ticker, but not balances of individual users.</p>
<p>In pseudocode, more traditional blockchains:</p>
<pre><code>fancy_token = {
    // Global state
    totalSupply: 50_000,
    ticker: "FANCY",

    // Individual balances of accoutns in a global hashmap
    balances: {
        alice_wallet: 10,
        bob_wallet: 15,
    },
}
</code></pre>
<p>Described storage model with slots:</p>
<pre><code>fancy_token = {
    // Global state owned by `fancy_token` in a slot managed by `state` contract
    state: {
      totalSupply: 50_000,
      ticker: "FANCY",
    },
    code: "...",
}

alice_wallet = {
    // Balance owned by `alice_wallet` in a slot managed by `fancy_token` contract
    fancy_token: {
        balance: 10,
    },
    code: "...",
}

bob_wallet = {
    // Balance owned by `bob_wallet` in a slot managed by `fancy_token` contract
    fancy_token: {
        balance: 15,
    },
    code: "...",
}
</code></pre>
<p>The state of the contract (and any other slot) is typically bounded in size and defined by contract developer upfront.
Bounded size allows execution environment to allocate the necessary amount of memory and to limit the amount of data
that potentially needs to be sent with the transaction over the network (see <a href="Execution_environment/Transactions_overview#transaction-processing">Transaction processing</a>).</p>
<p>This implies there can’t be more traditional unbounded hashmap there. Instead, balances are stored in slots of contracts
that own the balance (like smart wallet owned by end user), but managed by the token contract. This is similar to how
contract’s state and code are managed by corresponding system contracts.</p>
<p>Visually, it looks something like this:</p>
<pre><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1153 388"><svg class="d2-2022777730 d2-svg" width="1153" height="388" viewBox="10 11 1153 388"><rect x="10.000000" y="11.000000" width="1153.000000" height="388.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-2022777730 .text {
	font-family: "d2-2022777730-font-regular";
}
@font-face {
	font-family: d2-2022777730-font-regular;
	src: url("data:application/font-woff;base64,d09GRgABAAAAAApgAAoAAAAAECwAAguFAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgXd/Vo2NtYXAAAAFUAAAAegAAAJYCmgKqZ2x5ZgAAAdAAAARoAAAFcMiXTDdoZWFkAAAGOAAAADYAAAA2G4Ue32hoZWEAAAZwAAAAJAAAACQKhAXTaG10eAAABpQAAABEAAAARCDTA5Fsb2NhAAAG2AAAACQAAAAkC5oNSm1heHAAAAb8AAAAIAAAACAAKQD2bmFtZQAABxwAAAMjAAAIFAbDVU1wb3N0AAAKQAAAAB0AAAAg/9EAMgADAgkBkAAFAAACigJYAAAASwKKAlgAAAFeADIBIwAAAgsFAwMEAwICBGAAAvcAAAADAAAAAAAAAABBREJPAEAAIP//Au7/BgAAA9gBESAAAZ8AAAAAAeYClAAAACAAA3icbMw9rgFxHEDRM+8/b3wNplLPWlgCiVpERUjEKqyB0NCKHdiKlfwko3XLU1xkkgyl3BEjlaRQm5iZW1jZ2Nk7RKA2Nm18aW379XjHK57xiHvc4hqXOMepuf4q8yfJ/Su0tHV09ZT6BoYqPgAAAP//AQAA//8uqB0yAAB4nGyUS0wb1xfGz70zeOIwxAx+DBA/sAdmsIMxnid+MA4G8weCwYxDHjjwFw3ECNooctVESFXSKqkaKWrLIotIyaJqV11V3VStumvUCLVVu+tDaqWqCxQ1i1aWF1VVhmrGkCZSV/eszne+33fOhRY4D4AVfBcIcIILOsALIDFhpi8sCBylSZrGsYQmIIY6j34ytxGakklVJZP5J/mtGzfQuev47t6L6VvV6hfL166Zb+0+NkX0zWMgYBEA9+JtYKAbOKunJPp8Xo+D8tqPgyMkUVVknuOYw2Lx4dhaKpnInMpdmb6+cnq6WFyrLSwvnanh7Z6JdHLORbbOjp88E0NbaTE1tNfI5UdSAIBA3m/g4/gBBABaIjyvyKoqiT6W4nku4nB4PT6fJKoa63Agw3j91MytcvaCP96dj+lLkljRE9OhQeEFev7e5sY9I9mj+iOjVw1jK98fkeOi3T+230C/4wcQt/sLmt1PkXleEAbx82qWGMsGsWURtReunhC5/0ujk4FkaDk0ElWWM5lVLh6cGtTGwmL3Ej/Sq67SykC6L54ZivT7j0XbYvkhcS4e71UDYXkgFO1u7W+PjyblBREQ+AHQ33gbKIsnp4S9HPPrI/TLIzw9MbH3MdizsgD4L7wNYQCJkNw+HyupquZ+piI4gucFzuGgiPfunCk4PU6ytbO1MlOhO2nS2XG0ULq9etHpOkJSHUdW8LZ5X9lQlE0ZrZn35c1mtXcF3eGneH6KN18BbPFHH6E6dEMvABuxAtBkGwcl2HC8DGcJCqKqKXYgn4/Mv3OfOdEfmw70RC6mz5fGKSIy7+N0bmtFpKdGSwtMaJjr8aR80Zcq5ndpfywfCb3pyiaifYBgcL+BPkR1i8d/530Yd8fJ9ezopj5U6Ip5E4GBglAei6R9veESna2VjFo2wqruzsTCcLka8GiBMACGxH4D/Yh3wA09h17s5oIiHZrQlKdCf1YuZ1a0mN5Dlscpwj/TdTIbSgWFHD9Bv7E197Ie7C5/tjec8kcLY6afTZSHz14EbM//JapDJ4Sec2CdR/jpshJh2ZJB7OiGnlvVltYQNj9pOTvBZY4HQnNfITKXkubpkdpcqaa/ut7W5Sxe8DKqJ4j46eKcvQsGANrFO0Db98dIbolycwLlNeaJbyvvf7r4dgXvmEEED82ff9t4rbk/xn4DfsA74Gq6ZyTmKc4PBqPGMSdJUa1HfHRKwZf27roZhHSSPND6HtXBY2tZq9bMnbFNUIwxThHcrFj8nzEw1JfpQ7sTXGJlyfwaRcd1vs98Fw64/IHq4ILjz3GxPwyh+UvYJ4ZcmWouV81kL+Vyl7K5YjGnz84eZJqtGaVadrxaPr2+frpcPeSwjOrAPDPbwbY0B+uajAbYdtrjCo11od1zg+rRSZIUdXOnyaRzv4EK+LJ1WzYTTtE0ySt5uX/ZPJkdmZw5Wrh5MxxrC9LtngS9OIna9Jbbt8fMejzpJHWqFeAfAAAA//8BAAD//zR/JhMAAQAAAAILhaEO++dfDzz1AAMD6AAAAADYXaChAAAAAN1mLzb+Ov7bCG8DyAAAAAMAAgAAAAAAAAABAAAD2P7vAAAImP46/joIbwABAAAAAAAAAAAAAAAAAAAAEQKNAFkAyAAAAkwAWgI7ADQCFgAqAhgAHAMSABcB+AA0AcgALgIrAC8B8AAuAe8AUgD/AFICIwBSAh4ALgFbAFIBUgAYAAAALAAsAGIAkgDWAOgBIgFaAYgBugHuAggCJAJGAnICkgK4AAEAAAARAIwADABmAAcAAQAAAAAAAAAAAAAAAAAEAAN4nJyU3U4bVxSFPwfbbVQ1FxWKyA06l22VjN0IogSuTAmKVYRTj9Mfqao0eMY/Yjwz8gxQqj5Ar/sWfYtc9Tn6EFWvq7O8DTaqFIEQsM6cvfdZZ6+1D7DJv2xQqz8E/mr+YLjGdnPP8AMeNZ8a3uC48bfh+kpMg7jxm+EmXzb6hj/iff0Pwx+zU//Z8EO26keGP+F5fdPwpxuOfww/Yof3C1yDl/xuuMYWheEHbPKT4Q0eYzVrdR7TNtzgM7YNN9kGBkypSJmSMcYxYsqYc+YklIQkzJkyIiHG0aVDSqWvGZGQY/y/XyNCKuZEqjihwpESkhJRMrGKvyor561OHGk1t70OFRMiTpVxRkSGI2dMTkbCmepUVBTs0aJFyVB8CypKAkqmpATkzBnToscRxwyYMKXEcaRKnllIzoiKSyKd7yzCd2ZIQkZprM7JiMXTiV+i7C7HOHoUil2tfLxW4SmO75TtueWK/YpAv26F2fq5SzYRF+pnqq6k2rmUghPt+nM7fCtcsYe7V3/WmXy4R7H+V6p8yrn0j6VUJiYZzm3RIZSDQvcEx4HWXUJ15Hu6DHhDj3cMtO7Qp0+HEwZ0ea3cHn0cX9PjhENldIUXe0dyzAk/4viGrmJ87cT6s1As4RcKc3cpjnPdY0ahnnvmge6a6IZ3V9jPUL7mjlI5Q82Rj3TSL9OcRYzNFYUYztTLpTdK619sjpjpLl7bm30/DRc2e8spviLXDHu3Ljh55RaMPqRqcMszl/oJiIjJOVXEkJwZLSquxPstEeekOA7VvTeakorOdY4/50ouSZiJQZdMdeYU+huZb0LjPlzzvbO3JFa+Z3p2fav7nOLUqxuN3ql7y73QupysKNAyVfMVNw3FNTPvJ5qpVf6hcku9bjnP6JNI9VQ3uP0OPCegzQ677DPROUPtXNgb0dY70eYV++rBGYmiRnJ1YhV2CXjBLru84sVazQ6HHNBj/w4cF1k9Dnh9a2ddp2UVZ3X+FJu2+DqeXa9e3luvz+/gyy80UTcvY1/a+G5fWLUb/58QMfNc3NbqndwTgv8AAAD//wEAAP//B1tMMAB4nGJgZgCD/+cYjBiwAAAAAAD//wEAAP//LwECAwAAAA==");
}
.d2-2022777730 .text-bold {
	font-family: "d2-2022777730-font-bold";
}
@font-face {
	font-family: d2-2022777730-font-bold;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-2022777730 .fill-N1{fill:#0A0F25;}
		.d2-2022777730 .fill-N2{fill:#676C7E;}
		.d2-2022777730 .fill-N3{fill:#9499AB;}
		.d2-2022777730 .fill-N4{fill:#CFD2DD;}
		.d2-2022777730 .fill-N5{fill:#DEE1EB;}
		.d2-2022777730 .fill-N6{fill:#EEF1F8;}
		.d2-2022777730 .fill-N7{fill:transparent;}
		.d2-2022777730 .fill-B1{fill:#0A0F25;}
		.d2-2022777730 .fill-B2{fill:#676C7E;}
		.d2-2022777730 .fill-B3{fill:#9499AB;}
		.d2-2022777730 .fill-B4{fill:#CFD2DD;}
		.d2-2022777730 .fill-B5{fill:#DEE1EB;}
		.d2-2022777730 .fill-B6{fill:#EEF1F8;}
		.d2-2022777730 .fill-AA2{fill:#676C7E;}
		.d2-2022777730 .fill-AA4{fill:#CFD2DD;}
		.d2-2022777730 .fill-AA5{fill:#DEE1EB;}
		.d2-2022777730 .fill-AB4{fill:#CFD2DD;}
		.d2-2022777730 .fill-AB5{fill:#DEE1EB;}
		.d2-2022777730 .stroke-N1{stroke:#0A0F25;}
		.d2-2022777730 .stroke-N2{stroke:#676C7E;}
		.d2-2022777730 .stroke-N3{stroke:#9499AB;}
		.d2-2022777730 .stroke-N4{stroke:#CFD2DD;}
		.d2-2022777730 .stroke-N5{stroke:#DEE1EB;}
		.d2-2022777730 .stroke-N6{stroke:#EEF1F8;}
		.d2-2022777730 .stroke-N7{stroke:transparent;}
		.d2-2022777730 .stroke-B1{stroke:#0A0F25;}
		.d2-2022777730 .stroke-B2{stroke:#676C7E;}
		.d2-2022777730 .stroke-B3{stroke:#9499AB;}
		.d2-2022777730 .stroke-B4{stroke:#CFD2DD;}
		.d2-2022777730 .stroke-B5{stroke:#DEE1EB;}
		.d2-2022777730 .stroke-B6{stroke:#EEF1F8;}
		.d2-2022777730 .stroke-AA2{stroke:#676C7E;}
		.d2-2022777730 .stroke-AA4{stroke:#CFD2DD;}
		.d2-2022777730 .stroke-AA5{stroke:#DEE1EB;}
		.d2-2022777730 .stroke-AB4{stroke:#CFD2DD;}
		.d2-2022777730 .stroke-AB5{stroke:#DEE1EB;}
		.d2-2022777730 .background-color-N1{background-color:#0A0F25;}
		.d2-2022777730 .background-color-N2{background-color:#676C7E;}
		.d2-2022777730 .background-color-N3{background-color:#9499AB;}
		.d2-2022777730 .background-color-N4{background-color:#CFD2DD;}
		.d2-2022777730 .background-color-N5{background-color:#DEE1EB;}
		.d2-2022777730 .background-color-N6{background-color:#EEF1F8;}
		.d2-2022777730 .background-color-N7{background-color:transparent;}
		.d2-2022777730 .background-color-B1{background-color:#0A0F25;}
		.d2-2022777730 .background-color-B2{background-color:#676C7E;}
		.d2-2022777730 .background-color-B3{background-color:#9499AB;}
		.d2-2022777730 .background-color-B4{background-color:#CFD2DD;}
		.d2-2022777730 .background-color-B5{background-color:#DEE1EB;}
		.d2-2022777730 .background-color-B6{background-color:#EEF1F8;}
		.d2-2022777730 .background-color-AA2{background-color:#676C7E;}
		.d2-2022777730 .background-color-AA4{background-color:#CFD2DD;}
		.d2-2022777730 .background-color-AA5{background-color:#DEE1EB;}
		.d2-2022777730 .background-color-AB4{background-color:#CFD2DD;}
		.d2-2022777730 .background-color-AB5{background-color:#DEE1EB;}
		.d2-2022777730 .color-N1{color:#0A0F25;}
		.d2-2022777730 .color-N2{color:#676C7E;}
		.d2-2022777730 .color-N3{color:#9499AB;}
		.d2-2022777730 .color-N4{color:#CFD2DD;}
		.d2-2022777730 .color-N5{color:#DEE1EB;}
		.d2-2022777730 .color-N6{color:#EEF1F8;}
		.d2-2022777730 .color-N7{color:transparent;}
		.d2-2022777730 .color-B1{color:#0A0F25;}
		.d2-2022777730 .color-B2{color:#676C7E;}
		.d2-2022777730 .color-B3{color:#9499AB;}
		.d2-2022777730 .color-B4{color:#CFD2DD;}
		.d2-2022777730 .color-B5{color:#DEE1EB;}
		.d2-2022777730 .color-B6{color:#EEF1F8;}
		.d2-2022777730 .color-AA2{color:#676C7E;}
		.d2-2022777730 .color-AA4{color:#CFD2DD;}
		.d2-2022777730 .color-AA5{color:#DEE1EB;}
		.d2-2022777730 .color-AB4{color:#CFD2DD;}
		.d2-2022777730 .color-AB5{color:#DEE1EB;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:transparent;--color-canvas-subtle:#EEF1F8;--color-border-default:#0A0F25;--color-border-muted:#676C7E;--color-neutral-muted:#EEF1F8;--color-accent-fg:#676C7E;--color-accent-emphasis:#676C7E;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-B3{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-B4{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-B5{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-2022777730);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.light-code{display: block}.dark-code{display: none}@media screen and (prefers-color-scheme:dark){
		.d2-2022777730 .fill-N1{fill:#CDD6F4;}
		.d2-2022777730 .fill-N2{fill:#BAC2DE;}
		.d2-2022777730 .fill-N3{fill:#A6ADC8;}
		.d2-2022777730 .fill-N4{fill:#585B70;}
		.d2-2022777730 .fill-N5{fill:#45475A;}
		.d2-2022777730 .fill-N6{fill:#313244;}
		.d2-2022777730 .fill-N7{fill:transparent;}
		.d2-2022777730 .fill-B1{fill:#CBA6f7;}
		.d2-2022777730 .fill-B2{fill:#CBA6f7;}
		.d2-2022777730 .fill-B3{fill:#6C7086;}
		.d2-2022777730 .fill-B4{fill:#585B70;}
		.d2-2022777730 .fill-B5{fill:#45475A;}
		.d2-2022777730 .fill-B6{fill:#313244;}
		.d2-2022777730 .fill-AA2{fill:#f38BA8;}
		.d2-2022777730 .fill-AA4{fill:#45475A;}
		.d2-2022777730 .fill-AA5{fill:#313244;}
		.d2-2022777730 .fill-AB4{fill:#45475A;}
		.d2-2022777730 .fill-AB5{fill:#313244;}
		.d2-2022777730 .stroke-N1{stroke:#CDD6F4;}
		.d2-2022777730 .stroke-N2{stroke:#BAC2DE;}
		.d2-2022777730 .stroke-N3{stroke:#A6ADC8;}
		.d2-2022777730 .stroke-N4{stroke:#585B70;}
		.d2-2022777730 .stroke-N5{stroke:#45475A;}
		.d2-2022777730 .stroke-N6{stroke:#313244;}
		.d2-2022777730 .stroke-N7{stroke:transparent;}
		.d2-2022777730 .stroke-B1{stroke:#CBA6f7;}
		.d2-2022777730 .stroke-B2{stroke:#CBA6f7;}
		.d2-2022777730 .stroke-B3{stroke:#6C7086;}
		.d2-2022777730 .stroke-B4{stroke:#585B70;}
		.d2-2022777730 .stroke-B5{stroke:#45475A;}
		.d2-2022777730 .stroke-B6{stroke:#313244;}
		.d2-2022777730 .stroke-AA2{stroke:#f38BA8;}
		.d2-2022777730 .stroke-AA4{stroke:#45475A;}
		.d2-2022777730 .stroke-AA5{stroke:#313244;}
		.d2-2022777730 .stroke-AB4{stroke:#45475A;}
		.d2-2022777730 .stroke-AB5{stroke:#313244;}
		.d2-2022777730 .background-color-N1{background-color:#CDD6F4;}
		.d2-2022777730 .background-color-N2{background-color:#BAC2DE;}
		.d2-2022777730 .background-color-N3{background-color:#A6ADC8;}
		.d2-2022777730 .background-color-N4{background-color:#585B70;}
		.d2-2022777730 .background-color-N5{background-color:#45475A;}
		.d2-2022777730 .background-color-N6{background-color:#313244;}
		.d2-2022777730 .background-color-N7{background-color:transparent;}
		.d2-2022777730 .background-color-B1{background-color:#CBA6f7;}
		.d2-2022777730 .background-color-B2{background-color:#CBA6f7;}
		.d2-2022777730 .background-color-B3{background-color:#6C7086;}
		.d2-2022777730 .background-color-B4{background-color:#585B70;}
		.d2-2022777730 .background-color-B5{background-color:#45475A;}
		.d2-2022777730 .background-color-B6{background-color:#313244;}
		.d2-2022777730 .background-color-AA2{background-color:#f38BA8;}
		.d2-2022777730 .background-color-AA4{background-color:#45475A;}
		.d2-2022777730 .background-color-AA5{background-color:#313244;}
		.d2-2022777730 .background-color-AB4{background-color:#45475A;}
		.d2-2022777730 .background-color-AB5{background-color:#313244;}
		.d2-2022777730 .color-N1{color:#CDD6F4;}
		.d2-2022777730 .color-N2{color:#BAC2DE;}
		.d2-2022777730 .color-N3{color:#A6ADC8;}
		.d2-2022777730 .color-N4{color:#585B70;}
		.d2-2022777730 .color-N5{color:#45475A;}
		.d2-2022777730 .color-N6{color:#313244;}
		.d2-2022777730 .color-N7{color:transparent;}
		.d2-2022777730 .color-B1{color:#CBA6f7;}
		.d2-2022777730 .color-B2{color:#CBA6f7;}
		.d2-2022777730 .color-B3{color:#6C7086;}
		.d2-2022777730 .color-B4{color:#585B70;}
		.d2-2022777730 .color-B5{color:#45475A;}
		.d2-2022777730 .color-B6{color:#313244;}
		.d2-2022777730 .color-AA2{color:#f38BA8;}
		.d2-2022777730 .color-AA4{color:#45475A;}
		.d2-2022777730 .color-AA5{color:#313244;}
		.d2-2022777730 .color-AB4{color:#45475A;}
		.d2-2022777730 .color-AB5{color:#313244;}.appendix text.text{fill:#CDD6F4}.md{--color-fg-default:#CDD6F4;--color-fg-muted:#BAC2DE;--color-fg-subtle:#A6ADC8;--color-canvas-default:transparent;--color-canvas-subtle:#313244;--color-border-default:#CBA6f7;--color-border-muted:#CBA6f7;--color-neutral-muted:#313244;--color-accent-fg:#CBA6f7;--color-accent-emphasis:#CBA6f7;--color-attention-subtle:#BAC2DE;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-B2{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-B3{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-B4{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-B5{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-B6{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-AA2{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-AA4{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-AA5{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-AB4{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-AB5{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-N1{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-N2{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-N3{fill:url(#streaks-normal-d2-2022777730);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-dark-d2-2022777730);mix-blend-mode:overlay}.sketch-overlay-N5{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-N6{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.sketch-overlay-N7{fill:url(#streaks-darker-d2-2022777730);mix-blend-mode:lighten}.light-code{display: none}.dark-code{display: block}}]]></style><g class="V2FsbGV0"><g class="shape" ><rect x="962.000000" y="60.000000" width="200.000000" height="338.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="1062.000000" y="93.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Wallet</text></g><g class="Q29kZUNvbnRyYWN0"><g class="shape" ><rect x="12.000000" y="216.000000" width="210.000000" height="176.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="117.000000" y="249.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Code contract</text></g><g class="U3RhdGVDb250cmFjdA=="><g class="shape" ><rect x="357.000000" y="12.000000" width="211.000000" height="171.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="462.500000" y="45.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">State contract</text></g><g class="VG9rZW4="><g class="shape" ><rect x="653.000000" y="103.000000" width="224.000000" height="252.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="765.000000" y="136.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Token contract</text></g><g class="V2FsbGV0LlN0YXRl"><g class="shape" ><rect x="1012.000000" y="110.000000" width="83.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="1053.500000" y="148.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">State</text></g><g class="V2FsbGV0LkJhbGFuY2U="><g class="shape" ><rect x="1012.000000" y="196.000000" width="100.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="1062.000000" y="234.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Balance</text></g><g class="V2FsbGV0LkNvZGU="><g class="shape" ><rect x="1012.000000" y="282.000000" width="81.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="1052.500000" y="320.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Code</text></g><g class="Q29kZUNvbnRyYWN0LkNvZGU="><g class="shape" ><rect x="76.000000" y="276.000000" width="81.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="116.500000" y="314.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Code</text></g><g class="U3RhdGVDb250cmFjdC5Db2Rl"><g class="shape" ><rect x="422.000000" y="67.000000" width="81.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="462.500000" y="105.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Code</text></g><g class="VG9rZW4uU3RhdGU="><g class="shape" ><rect x="723.000000" y="153.000000" width="83.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="764.500000" y="191.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">State</text></g><g class="VG9rZW4uQ29kZQ=="><g class="shape" ><rect x="723.000000" y="239.000000" width="81.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="763.500000" y="277.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Code</text></g><g class="KENvZGVDb250cmFjdCAtJmd0OyBXYWxsZXQuQ29kZSlbMF0="><marker id="mk-d2-2022777730-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 224.000000 286.000000 L 252.000000 286.000000 S 262.000000 286.000000 262.000000 296.000000 L 262.000000 385.000000 S 262.000000 395.000000 272.000000 395.000000 L 907.000000 395.000000 S 917.000000 395.000000 917.000000 385.000000 L 917.000000 325.500000 S 917.000000 315.500000 927.000000 315.500000 L 1008.000000 315.500000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KENvZGVDb250cmFjdCAtJmd0OyBDb2RlQ29udHJhY3QuQ29kZSlbMF0="><path d="M 13.500000 309.000000 L 72.500000 309.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KENvZGVDb250cmFjdCAtJmd0OyBTdGF0ZUNvbnRyYWN0LkNvZGUpWzBd"><path d="M 224.000000 266.000000 L 252.000000 266.000000 S 262.000000 266.000000 262.000000 256.000000 L 262.000000 110.000000 S 262.000000 100.000000 272.000000 100.000000 L 418.000000 100.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KENvZGVDb250cmFjdCAtJmd0OyBUb2tlbi5Db2RlKVswXQ=="><path d="M 224.000000 276.000000 L 720.000000 276.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KFN0YXRlQ29udHJhY3QgLSZndDsgV2FsbGV0LlN0YXRlKVswXQ=="><path d="M 570.000000 62.000000 L 907.000000 62.000000 S 917.000000 62.000000 917.000000 72.000000 L 917.000000 133.500000 S 917.000000 143.500000 927.000000 143.500000 L 1008.000000 143.500000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KFN0YXRlQ29udHJhY3QgLSZndDsgVG9rZW4uU3RhdGUpWzBd"><path d="M 570.000000 72.000000 L 598.000000 72.000000 S 608.000000 72.000000 608.000000 82.000000 L 608.000000 176.000000 S 608.000000 186.000000 618.000000 186.000000 L 720.000000 186.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><g class="KFRva2VuIC0mZ3Q7IFdhbGxldC5CYWxhbmNlKVswXQ=="><path d="M 879.000000 229.500000 L 1008.000000 229.500000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-2022777730-3488378134)" mask="url(#d2-2022777730)" /></g><mask id="d2-2022777730" maskUnits="userSpaceOnUse" x="10" y="11" width="1153" height="388">
<rect x="10" y="11" width="1153" height="388" fill="white"></rect>

</mask></svg></svg>
</pre>
<p>Contracts do not have access to underlying storage implementation in the form of key-value database, instead they modify
slots as the only way of persisting data between transactions.</p>
<h1 id="contract-io"><a class="header" href="#contract-io">Contract I/O</a></h1>
<p>Not only contract methods do not have access to general purpose key-value store (even if private to the contract), they
don’t have access to any other data except what was explicitly provided as method input. They also can’t return data in
any other way except through return arguments. Execution environment will pre-allocate memory for all slots/outputs and
provide it to the method to work with, removing a need for heap allocation in many cases.</p>
<p>One can think about contract logic as a pure function: it takes inputs and slots, potentially modifies slots and returns
outputs.</p>
<p>Conceptually, all methods look something like this:</p>
<pre><code class="language-rust ignore">#[derive(Debug, Copy, Clone, TrivialType)]
#[repr(C)]
pub struct MyContract {
    pub value: u32,
}

#[contract]
impl MyContract {
    /// Stateless compute
    #[view]
    pub fn add(
        #[input] &amp;a: &amp;u32,
        #[input] &amp;b: &amp;u32,
    ) -&gt; u32 {
        a + b
    }

    /// Calling another contract (in this case into itself)
    #[view]
    pub fn add_through_contract_call(
        #[env] env: &amp;Env,
        #[input] a: &amp;u32,
        #[input] b: &amp;u32,
    ) -&gt; Result&lt;u32, ContractError&gt; {
        env.my_contract_add(env.own_address(), a, b)
    }

    /// Modifying its own state using the contents of the slot
    #[update]
    pub fn self_increment_by_slot(
        &amp;mut self,
        #[slot] slot: &amp;MaybeData&lt;u32&gt;,
    ) -&gt; Result&lt;u32, ContractError&gt; {
        let old_value = self.value;

        // The slot may or may not exist yet
        let Some(slot_value) = slot.get().copied() else {
            return Err(ContractError::Forbidden);
        };

        self.value = old_value
            .checked_add(slot_value)
            .ok_or(ContractError::BadInput)?;
        Ok(old_value)
    }
}</code></pre>
<p>Environment handle (<code>&amp;Env</code> or <code>&amp;mut Env</code>) allows calling other contracts and request ephemeral state, contract slots can
be read and written to, inputs are read-only and outputs are write-only. <code>&amp;</code> or <code>&amp;mut</code> in Rust limits what can be done
with these types, there is no other implicit “global” way to read or update ephemeral or permanent state of the
blockchain except through these explicit arguments.</p>
<p>Handling everything through explicit inputs and outputs results in straightforward implementation, analysis and testing
approach without side effects. In many cases, even heap allocations can be avoided completely, leading to fast and
compact smart contract implementation.</p>
<p><code>#[contract]</code> macro and attributes like <code>#[env]</code> do not impact the code in a method in any way, but help to generate
additional helper data structures, functions and metadata about the contract. The macro also verifies a lot of different
invariants about the contract with helpful compile-time error messages if something goes wrong. For example, when
different methods use different types for <code>#[slot]</code> argument or when type not allowed for FFI is used in an argument.</p>
<h1 id="method-call-context"><a class="header" href="#method-call-context">Method call context</a></h1>
<p>When calling into another contract, a method context needs to be specified. The correct mental model for context is
“user of the child process,” where “process” is a method call. Essentially, something executed with a context of a
contract can be thought as done “on behalf” of that contract, which depending on circumstances may or may not be
desired.</p>
<p>Initially, context is “Null.” For each call into another contract, the context of the current method can be either
preserved, reset to “Null” or replaced with the current contract’s address. Those are the only options. Contracts do not
have privileges to change context to the address of an arbitrary contract.</p>
<p>The safest option is to reset context to “Null,” which means called contract will be able to “know” who called it, but
unable to convince any further calls in it. Preservation of the context allows to “delegate” certain operations to
another contract, which while is potentially dangerous, allows for more advanced use cases.</p>
<p>In addition to argument attributes mentioned before, there is also <code>#[tmp]</code>, which is essentially an ephemeral storage
that only lives for the duration of a single <a href="Execution_environment/Transactions_overview#transactions-abstraction">transaction</a>. It can be used for temporary approvals, allowing to use
“Null” context for most operations, while also allowing for contracts to do certain operations effectively on behalf of
the caller. For example, in a transaction, the first call might approve a defi contract to spend some tokens and then
call defi contract to actually do the operation. Both calls are done with “Null” method context, but still achieve the
desired impact with the least permission possible.</p>
<h1 id="metadata"><a class="header" href="#metadata">Metadata</a></h1>
<p>Metadata about contract is a crucial piece used in many places of the system. Metadata essentially describes in a
compact binary format all traits and methods that the contract implements alongside recursive metadata of all types in
those methods.</p>
<p>Metadata contains exhaustive details about the method, allowing execution environment to encode and decode arguments
from/to method calls from metadata alone.</p>
<p>Metadata can also be used to auto-generate user-facing interfaces and FFI bindings to other languages since it contains
relatively basic types.</p>
<p>The same metadata can also be used by a transaction handler contract to encode/decode method calls in a <a href="Execution_environment/Transactions_overview#transactions-abstraction">transaction</a>.
This is huge because with metadata being an inherent part of the contract itself, enables hardware wallets to accurately
and verifiably render transaction contents in a relatively user-friendly way, especially on those with larger screens.
This means no blind signing anymore and no need to trust the computer wallet is connected to either, the wallet can
verify and render everything on its own.</p>
<div style="break-before: page; page-break-before: always;"></div><style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="transactions-abstraction"><a class="header" href="#transactions-abstraction">Transactions abstraction</a></h1>
<p>Transactions are a way to run a logic on a blockchain, which in blockchains with smart contracts means to call
contracts. There are different ways to do this, but to make things as flexible as possible, little assumptions are made
about what transaction actually looks like. There are many use cases that should be supported, it is tough to foresee
them all.</p>
<p>Since as mentioned in <a href="Execution_environment/Contracts_overview">Contract overview</a> “<a href="Execution_environment/Contracts_overview#everything-is-a-contract">Everything is a contract</a>,” then the majority of transaction processing must
be done by a contract too. To do this, the contract must implement the following “transaction handler” interface that
looks like this (simplified for readability):</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TransactionHeader {
    pub block_hash: Blake3Hash,
    pub gas_limit: Gas,
    pub contract: Address,
}

pub struct TransactionSlot {
    pub owner: Address,
    pub contract: Address,
}

pub type TxHandlerPayload = [u128];
pub type TxHandlerSlots = [TransactionSlot];
pub type TxHandlerSeal = [u8];

#[contract]
pub trait TxHandler {
    /// Verify a transaction
    #[view]
    fn authorize(
        #[env] env: &amp;Env,
        #[input] header: &amp;TransactionHeader,
        #[input] read_slots: &amp;TxHandlerSlots,
        #[input] write_slots: &amp;TxHandlerSlots,
        #[input] payload: &amp;TxHandlerPayload,
        #[input] seal: &amp;TxHandlerSeal,
    ) -&gt; Result&lt;(), ContractError&gt;;

    /// Execute previously verified transaction
    #[update]
    fn execute(
        #[env] env: &amp;mut Env,
        #[input] header: &amp;TransactionHeader,
        #[input] read_slots: &amp;TxHandlerSlots,
        #[input] write_slots: &amp;TxHandlerSlots,
        #[input] payload: &amp;TxHandlerPayload,
        #[input] seal: &amp;TxHandlerSeal,
    ) -&gt; Result&lt;(), ContractError&gt;;
}
<span class="boring">}</span></code></pre></pre>
<p>High-level transaction processing workflow:</p>
<pre><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" viewBox="0 0 861 68"><svg class="d2-1230038825 d2-svg" width="861" height="68" viewBox="11 11 861 68"><rect x="11.000000" y="11.000000" width="861.000000" height="68.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-1230038825 .text-bold {
	font-family: "d2-1230038825-font-bold";
}
@font-face {
	font-family: d2-1230038825-font-bold;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-1230038825 .fill-N1{fill:#0A0F25;}
		.d2-1230038825 .fill-N2{fill:#676C7E;}
		.d2-1230038825 .fill-N3{fill:#9499AB;}
		.d2-1230038825 .fill-N4{fill:#CFD2DD;}
		.d2-1230038825 .fill-N5{fill:#DEE1EB;}
		.d2-1230038825 .fill-N6{fill:#EEF1F8;}
		.d2-1230038825 .fill-N7{fill:transparent;}
		.d2-1230038825 .fill-B1{fill:#0A0F25;}
		.d2-1230038825 .fill-B2{fill:#676C7E;}
		.d2-1230038825 .fill-B3{fill:#9499AB;}
		.d2-1230038825 .fill-B4{fill:#CFD2DD;}
		.d2-1230038825 .fill-B5{fill:#DEE1EB;}
		.d2-1230038825 .fill-B6{fill:#EEF1F8;}
		.d2-1230038825 .fill-AA2{fill:#676C7E;}
		.d2-1230038825 .fill-AA4{fill:#CFD2DD;}
		.d2-1230038825 .fill-AA5{fill:#DEE1EB;}
		.d2-1230038825 .fill-AB4{fill:#CFD2DD;}
		.d2-1230038825 .fill-AB5{fill:#DEE1EB;}
		.d2-1230038825 .stroke-N1{stroke:#0A0F25;}
		.d2-1230038825 .stroke-N2{stroke:#676C7E;}
		.d2-1230038825 .stroke-N3{stroke:#9499AB;}
		.d2-1230038825 .stroke-N4{stroke:#CFD2DD;}
		.d2-1230038825 .stroke-N5{stroke:#DEE1EB;}
		.d2-1230038825 .stroke-N6{stroke:#EEF1F8;}
		.d2-1230038825 .stroke-N7{stroke:transparent;}
		.d2-1230038825 .stroke-B1{stroke:#0A0F25;}
		.d2-1230038825 .stroke-B2{stroke:#676C7E;}
		.d2-1230038825 .stroke-B3{stroke:#9499AB;}
		.d2-1230038825 .stroke-B4{stroke:#CFD2DD;}
		.d2-1230038825 .stroke-B5{stroke:#DEE1EB;}
		.d2-1230038825 .stroke-B6{stroke:#EEF1F8;}
		.d2-1230038825 .stroke-AA2{stroke:#676C7E;}
		.d2-1230038825 .stroke-AA4{stroke:#CFD2DD;}
		.d2-1230038825 .stroke-AA5{stroke:#DEE1EB;}
		.d2-1230038825 .stroke-AB4{stroke:#CFD2DD;}
		.d2-1230038825 .stroke-AB5{stroke:#DEE1EB;}
		.d2-1230038825 .background-color-N1{background-color:#0A0F25;}
		.d2-1230038825 .background-color-N2{background-color:#676C7E;}
		.d2-1230038825 .background-color-N3{background-color:#9499AB;}
		.d2-1230038825 .background-color-N4{background-color:#CFD2DD;}
		.d2-1230038825 .background-color-N5{background-color:#DEE1EB;}
		.d2-1230038825 .background-color-N6{background-color:#EEF1F8;}
		.d2-1230038825 .background-color-N7{background-color:transparent;}
		.d2-1230038825 .background-color-B1{background-color:#0A0F25;}
		.d2-1230038825 .background-color-B2{background-color:#676C7E;}
		.d2-1230038825 .background-color-B3{background-color:#9499AB;}
		.d2-1230038825 .background-color-B4{background-color:#CFD2DD;}
		.d2-1230038825 .background-color-B5{background-color:#DEE1EB;}
		.d2-1230038825 .background-color-B6{background-color:#EEF1F8;}
		.d2-1230038825 .background-color-AA2{background-color:#676C7E;}
		.d2-1230038825 .background-color-AA4{background-color:#CFD2DD;}
		.d2-1230038825 .background-color-AA5{background-color:#DEE1EB;}
		.d2-1230038825 .background-color-AB4{background-color:#CFD2DD;}
		.d2-1230038825 .background-color-AB5{background-color:#DEE1EB;}
		.d2-1230038825 .color-N1{color:#0A0F25;}
		.d2-1230038825 .color-N2{color:#676C7E;}
		.d2-1230038825 .color-N3{color:#9499AB;}
		.d2-1230038825 .color-N4{color:#CFD2DD;}
		.d2-1230038825 .color-N5{color:#DEE1EB;}
		.d2-1230038825 .color-N6{color:#EEF1F8;}
		.d2-1230038825 .color-N7{color:transparent;}
		.d2-1230038825 .color-B1{color:#0A0F25;}
		.d2-1230038825 .color-B2{color:#676C7E;}
		.d2-1230038825 .color-B3{color:#9499AB;}
		.d2-1230038825 .color-B4{color:#CFD2DD;}
		.d2-1230038825 .color-B5{color:#DEE1EB;}
		.d2-1230038825 .color-B6{color:#EEF1F8;}
		.d2-1230038825 .color-AA2{color:#676C7E;}
		.d2-1230038825 .color-AA4{color:#CFD2DD;}
		.d2-1230038825 .color-AA5{color:#DEE1EB;}
		.d2-1230038825 .color-AB4{color:#CFD2DD;}
		.d2-1230038825 .color-AB5{color:#DEE1EB;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:transparent;--color-canvas-subtle:#EEF1F8;--color-border-default:#0A0F25;--color-border-muted:#676C7E;--color-neutral-muted:#EEF1F8;--color-accent-fg:#676C7E;--color-accent-emphasis:#676C7E;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-B3{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-B4{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-B5{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-1230038825);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.light-code{display: block}.dark-code{display: none}@media screen and (prefers-color-scheme:dark){
		.d2-1230038825 .fill-N1{fill:#CDD6F4;}
		.d2-1230038825 .fill-N2{fill:#BAC2DE;}
		.d2-1230038825 .fill-N3{fill:#A6ADC8;}
		.d2-1230038825 .fill-N4{fill:#585B70;}
		.d2-1230038825 .fill-N5{fill:#45475A;}
		.d2-1230038825 .fill-N6{fill:#313244;}
		.d2-1230038825 .fill-N7{fill:transparent;}
		.d2-1230038825 .fill-B1{fill:#CBA6f7;}
		.d2-1230038825 .fill-B2{fill:#CBA6f7;}
		.d2-1230038825 .fill-B3{fill:#6C7086;}
		.d2-1230038825 .fill-B4{fill:#585B70;}
		.d2-1230038825 .fill-B5{fill:#45475A;}
		.d2-1230038825 .fill-B6{fill:#313244;}
		.d2-1230038825 .fill-AA2{fill:#f38BA8;}
		.d2-1230038825 .fill-AA4{fill:#45475A;}
		.d2-1230038825 .fill-AA5{fill:#313244;}
		.d2-1230038825 .fill-AB4{fill:#45475A;}
		.d2-1230038825 .fill-AB5{fill:#313244;}
		.d2-1230038825 .stroke-N1{stroke:#CDD6F4;}
		.d2-1230038825 .stroke-N2{stroke:#BAC2DE;}
		.d2-1230038825 .stroke-N3{stroke:#A6ADC8;}
		.d2-1230038825 .stroke-N4{stroke:#585B70;}
		.d2-1230038825 .stroke-N5{stroke:#45475A;}
		.d2-1230038825 .stroke-N6{stroke:#313244;}
		.d2-1230038825 .stroke-N7{stroke:transparent;}
		.d2-1230038825 .stroke-B1{stroke:#CBA6f7;}
		.d2-1230038825 .stroke-B2{stroke:#CBA6f7;}
		.d2-1230038825 .stroke-B3{stroke:#6C7086;}
		.d2-1230038825 .stroke-B4{stroke:#585B70;}
		.d2-1230038825 .stroke-B5{stroke:#45475A;}
		.d2-1230038825 .stroke-B6{stroke:#313244;}
		.d2-1230038825 .stroke-AA2{stroke:#f38BA8;}
		.d2-1230038825 .stroke-AA4{stroke:#45475A;}
		.d2-1230038825 .stroke-AA5{stroke:#313244;}
		.d2-1230038825 .stroke-AB4{stroke:#45475A;}
		.d2-1230038825 .stroke-AB5{stroke:#313244;}
		.d2-1230038825 .background-color-N1{background-color:#CDD6F4;}
		.d2-1230038825 .background-color-N2{background-color:#BAC2DE;}
		.d2-1230038825 .background-color-N3{background-color:#A6ADC8;}
		.d2-1230038825 .background-color-N4{background-color:#585B70;}
		.d2-1230038825 .background-color-N5{background-color:#45475A;}
		.d2-1230038825 .background-color-N6{background-color:#313244;}
		.d2-1230038825 .background-color-N7{background-color:transparent;}
		.d2-1230038825 .background-color-B1{background-color:#CBA6f7;}
		.d2-1230038825 .background-color-B2{background-color:#CBA6f7;}
		.d2-1230038825 .background-color-B3{background-color:#6C7086;}
		.d2-1230038825 .background-color-B4{background-color:#585B70;}
		.d2-1230038825 .background-color-B5{background-color:#45475A;}
		.d2-1230038825 .background-color-B6{background-color:#313244;}
		.d2-1230038825 .background-color-AA2{background-color:#f38BA8;}
		.d2-1230038825 .background-color-AA4{background-color:#45475A;}
		.d2-1230038825 .background-color-AA5{background-color:#313244;}
		.d2-1230038825 .background-color-AB4{background-color:#45475A;}
		.d2-1230038825 .background-color-AB5{background-color:#313244;}
		.d2-1230038825 .color-N1{color:#CDD6F4;}
		.d2-1230038825 .color-N2{color:#BAC2DE;}
		.d2-1230038825 .color-N3{color:#A6ADC8;}
		.d2-1230038825 .color-N4{color:#585B70;}
		.d2-1230038825 .color-N5{color:#45475A;}
		.d2-1230038825 .color-N6{color:#313244;}
		.d2-1230038825 .color-N7{color:transparent;}
		.d2-1230038825 .color-B1{color:#CBA6f7;}
		.d2-1230038825 .color-B2{color:#CBA6f7;}
		.d2-1230038825 .color-B3{color:#6C7086;}
		.d2-1230038825 .color-B4{color:#585B70;}
		.d2-1230038825 .color-B5{color:#45475A;}
		.d2-1230038825 .color-B6{color:#313244;}
		.d2-1230038825 .color-AA2{color:#f38BA8;}
		.d2-1230038825 .color-AA4{color:#45475A;}
		.d2-1230038825 .color-AA5{color:#313244;}
		.d2-1230038825 .color-AB4{color:#45475A;}
		.d2-1230038825 .color-AB5{color:#313244;}.appendix text.text{fill:#CDD6F4}.md{--color-fg-default:#CDD6F4;--color-fg-muted:#BAC2DE;--color-fg-subtle:#A6ADC8;--color-canvas-default:transparent;--color-canvas-subtle:#313244;--color-border-default:#CBA6f7;--color-border-muted:#CBA6f7;--color-neutral-muted:#313244;--color-accent-fg:#CBA6f7;--color-accent-emphasis:#CBA6f7;--color-attention-subtle:#BAC2DE;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-B2{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-B3{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-B4{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-B5{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-B6{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-AA2{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-AA4{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-AA5{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-AB4{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-AB5{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-N1{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-N2{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-N3{fill:url(#streaks-normal-d2-1230038825);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-dark-d2-1230038825);mix-blend-mode:overlay}.sketch-overlay-N5{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-N6{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.sketch-overlay-N7{fill:url(#streaks-darker-d2-1230038825);mix-blend-mode:lighten}.light-code{display: none}.dark-code{display: block}}]]></style><g class="JiMzNDtUeEhhbmRsZXI6OmF1dGhvcml6ZSgpJiMzNDs="><g class="shape" ><rect x="12.000000" y="12.000000" width="208.000000" height="66.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="116.000000" y="50.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">TxHandler::authorize()</text></g><g class="Q2hhcmdlIGdhcw=="><g class="shape" ><rect x="290.000000" y="12.000000" width="123.000000" height="66.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="351.500000" y="50.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Charge gas</text></g><g class="JiMzNDtUeEhhbmRsZXI6OmV4ZWN1dGUoKSYjMzQ7"><g class="shape" ><rect x="483.000000" y="12.000000" width="195.000000" height="66.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="580.500000" y="50.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">TxHandler::execute()</text></g><g class="UmVmdW5kIGdhcw=="><g class="shape" ><rect x="748.000000" y="12.000000" width="123.000000" height="66.000000" class=" stroke-B1 fill-B6" style="stroke-width:2;" /></g><text x="809.500000" y="50.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">Refund gas</text></g><g class="KCYjMzQ7VHhIYW5kbGVyOjphdXRob3JpemUoKSYjMzQ7IC0mZ3Q7IENoYXJnZSBnYXMpWzBd"><marker id="mk-d2-1230038825-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 222.000000 45.000000 L 286.000000 45.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1230038825-3488378134)" mask="url(#d2-1230038825)" /></g><g class="KENoYXJnZSBnYXMgLSZndDsgJiMzNDtUeEhhbmRsZXI6OmV4ZWN1dGUoKSYjMzQ7KVswXQ=="><path d="M 415.000000 45.000000 L 479.000000 45.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1230038825-3488378134)" mask="url(#d2-1230038825)" /></g><g class="KCYjMzQ7VHhIYW5kbGVyOjpleGVjdXRlKCkmIzM0OyAtJmd0OyBSZWZ1bmQgZ2FzKVswXQ=="><path d="M 680.000000 45.000000 L 744.000000 45.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1230038825-3488378134)" mask="url(#d2-1230038825)" /></g><mask id="d2-1230038825" maskUnits="userSpaceOnUse" x="11" y="11" width="861" height="68">
<rect x="11" y="11" width="861" height="68" fill="white"></rect>

</mask></svg></svg>
</pre>
<p><code>TxHandler::authorize()</code> is a method to be called by execution environment that must, in a limited amount of time,
either authorize further processing of the transaction or reject it. It can read the state of the blockchain, but can’t
modify it. If authorized successfully, execution environment will charge <code>TransactionHeader.gas_limit</code> gas, call
<code>TxHandler::execute()</code> and return unused gas afterward. It is up to the node to decide how much compute to allow in
authorization, but some reasonable for reference hardware default will be used to allow for typical signature
verification needs. Compute involved in transaction authorization will be added to the total gas usage. <code>seal</code> is where
the signature will typically be stored, although it is more of a convention a strict requirement.</p>
<p><code>TxHandler::execute()</code> is responsible for transaction execution, meaning making method calls. Method calls by convention
are serialized into <code>payload</code> (<code>u128</code> is used to ensure its alignment in memory for performance reasons and to enable
zero-copy throughout the system). It is up to the contract how it wants to encode method calls there, though optimized
reference implementation of this is provided. While typically not needed, authorization code may also inspect <code>payload</code>
to, for example, only allow certain method calls and not others.</p>
<p>This separation should be enough to build all kinds of contracts that would server as a “wallet” for the user: from
those that do simple signature verification, to complex multisig wallet with a sophisticated role-based permission
system. There is a large space of tradeoffs to explore.</p>
<p><code>read_slots</code> and <code>write_slots</code> contain the list of slots (see <a href="Execution_environment/Contracts_overview#storage-model">Storage model</a>), which will be read or possibly modified
during transaction execution. They will not need to be inspected by most contracts in detail, though can be used
constrain interation with a limited set of contracts if needed. This information is crucial for to be able to schedule
concurrent execution of non-conflicting transactions, leveraging the fact that modern CPUs have multiple cores. This is
primarily enabled by the storage model that makes the storage used by contracts well suited for concurrent execution by
avoiding data structures like global hashmaps that are likely to be updated by multiple transactions in a block.</p>
<h1 id="transaction-processing"><a class="header" href="#transaction-processing">Transaction processing</a></h1>
<p>A transaction submitted to the network will include not only inputs to the method calls, the storage items (code, state,
other slots) required for the transaction to be processed alongside corresponding storage proofs. This allows for
consensus nodes to not store state of contracts beyond a small root, yet being able to process incoming transactions,
leading to much lower disk requirements. This is especially true in the presence of dormant contracts without any
activity for a long period of time and generally removes the need to charge “rent” for the state. It is, of course,
possible for node to have a cache to reduce or remove the need to download frequently used storage items.</p>
<p>Each method call of the contract has <a href="Execution_environment/Contracts_overview#metadata">metadata</a> associated with it about what slots will be read or modified alongside
any inputs or outputs it expects and their type information. With this information and <code>read_slots</code>/<code>write_slots</code>
included in the transaction, execution engine can run non-conflicting transactions in parallel.</p>
<p>For example, balance transfer between two accounts doesn’t change the total issuance of the token. So there is no need
to change the global state of the token contract and no reason why such transfers affecting a disjoint set of accounts
can’t be run in parallel.</p>
<p>Not only that, storage items used in each method call follow a Rust-like ownership model where contract can’t
recursively call its own method that mutates already accessed slots because it’ll violate safety invariants. Recursive
calls of stateless or read-only methods are fine though.</p>
<p>The right mental model is that storage access can be used with shared <code>&amp;</code> or exclusive <code>&amp;mut</code> references. It is possible
to have multiple shared references to the same slot at the same time. For exclusive access in a recursive call to the
slot already being accessed, caller must share it as an input instead, explicitly giving borrowing the data. As a
result, multiple calls (in the same transaction or even different transaction) can read the same slot concurrently, but
only one of them is allowed to mutate a particular storage item at a time. And any violation aborts the corresponding
method, which caller can observe and either handle or propagate further up the stack.</p>
<p>This makes traditional reentrancy attacks impossible in such execution environment.</p>
<p>Conceptually in pseudocode with <code>RwLock</code> it looks something like this:</p>
<pre><pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn entrypoint(data: &amp;RwLock&lt;Data&gt;) -&gt; Result&lt;(), Error&gt; {
    // This is the first write access, it succeeds
    let data_write_guard = data.try_write()?;

    // This will fail because we still have write access to the data
    if call_into_other_contract(data).is_err() {
        // This is okay, the data was given as an explicit argument
        modify_data(data_write_guard);
    }

    Ok(())
}

fn call_into_other_contract(data: &amp;RwLock&lt;Data&gt;) -&gt; Result&lt;(), Error&gt; {
    // Only succeeds if there isn't already write access elsewhere
    data.try_read()?;

    Ok(())
}

fn modify_data(data: &amp;mut Data) {}
<span class="boring">}</span></code></pre></pre>
<p>Here is a visual example:</p>
<pre><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1349 255"><svg class="d2-1342845152 d2-svg" width="1349" height="255" viewBox="11 11 1349 255"><rect x="11.000000" y="11.000000" width="1349.000000" height="255.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-1342845152 .text {
	font-family: "d2-1342845152-font-regular";
}
@font-face {
	font-family: d2-1342845152-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-1342845152 .text-bold {
	font-family: "d2-1342845152-font-bold";
}
@font-face {
	font-family: d2-1342845152-font-bold;
	src: url("data:application/font-woff;base64,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");
}
.d2-1342845152 .text-italic {
	font-family: "d2-1342845152-font-italic";
}
@font-face {
	font-family: d2-1342845152-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-1342845152 .fill-N1{fill:#0A0F25;}
		.d2-1342845152 .fill-N2{fill:#676C7E;}
		.d2-1342845152 .fill-N3{fill:#9499AB;}
		.d2-1342845152 .fill-N4{fill:#CFD2DD;}
		.d2-1342845152 .fill-N5{fill:#DEE1EB;}
		.d2-1342845152 .fill-N6{fill:#EEF1F8;}
		.d2-1342845152 .fill-N7{fill:transparent;}
		.d2-1342845152 .fill-B1{fill:#0A0F25;}
		.d2-1342845152 .fill-B2{fill:#676C7E;}
		.d2-1342845152 .fill-B3{fill:#9499AB;}
		.d2-1342845152 .fill-B4{fill:#CFD2DD;}
		.d2-1342845152 .fill-B5{fill:#DEE1EB;}
		.d2-1342845152 .fill-B6{fill:#EEF1F8;}
		.d2-1342845152 .fill-AA2{fill:#676C7E;}
		.d2-1342845152 .fill-AA4{fill:#CFD2DD;}
		.d2-1342845152 .fill-AA5{fill:#DEE1EB;}
		.d2-1342845152 .fill-AB4{fill:#CFD2DD;}
		.d2-1342845152 .fill-AB5{fill:#DEE1EB;}
		.d2-1342845152 .stroke-N1{stroke:#0A0F25;}
		.d2-1342845152 .stroke-N2{stroke:#676C7E;}
		.d2-1342845152 .stroke-N3{stroke:#9499AB;}
		.d2-1342845152 .stroke-N4{stroke:#CFD2DD;}
		.d2-1342845152 .stroke-N5{stroke:#DEE1EB;}
		.d2-1342845152 .stroke-N6{stroke:#EEF1F8;}
		.d2-1342845152 .stroke-N7{stroke:transparent;}
		.d2-1342845152 .stroke-B1{stroke:#0A0F25;}
		.d2-1342845152 .stroke-B2{stroke:#676C7E;}
		.d2-1342845152 .stroke-B3{stroke:#9499AB;}
		.d2-1342845152 .stroke-B4{stroke:#CFD2DD;}
		.d2-1342845152 .stroke-B5{stroke:#DEE1EB;}
		.d2-1342845152 .stroke-B6{stroke:#EEF1F8;}
		.d2-1342845152 .stroke-AA2{stroke:#676C7E;}
		.d2-1342845152 .stroke-AA4{stroke:#CFD2DD;}
		.d2-1342845152 .stroke-AA5{stroke:#DEE1EB;}
		.d2-1342845152 .stroke-AB4{stroke:#CFD2DD;}
		.d2-1342845152 .stroke-AB5{stroke:#DEE1EB;}
		.d2-1342845152 .background-color-N1{background-color:#0A0F25;}
		.d2-1342845152 .background-color-N2{background-color:#676C7E;}
		.d2-1342845152 .background-color-N3{background-color:#9499AB;}
		.d2-1342845152 .background-color-N4{background-color:#CFD2DD;}
		.d2-1342845152 .background-color-N5{background-color:#DEE1EB;}
		.d2-1342845152 .background-color-N6{background-color:#EEF1F8;}
		.d2-1342845152 .background-color-N7{background-color:transparent;}
		.d2-1342845152 .background-color-B1{background-color:#0A0F25;}
		.d2-1342845152 .background-color-B2{background-color:#676C7E;}
		.d2-1342845152 .background-color-B3{background-color:#9499AB;}
		.d2-1342845152 .background-color-B4{background-color:#CFD2DD;}
		.d2-1342845152 .background-color-B5{background-color:#DEE1EB;}
		.d2-1342845152 .background-color-B6{background-color:#EEF1F8;}
		.d2-1342845152 .background-color-AA2{background-color:#676C7E;}
		.d2-1342845152 .background-color-AA4{background-color:#CFD2DD;}
		.d2-1342845152 .background-color-AA5{background-color:#DEE1EB;}
		.d2-1342845152 .background-color-AB4{background-color:#CFD2DD;}
		.d2-1342845152 .background-color-AB5{background-color:#DEE1EB;}
		.d2-1342845152 .color-N1{color:#0A0F25;}
		.d2-1342845152 .color-N2{color:#676C7E;}
		.d2-1342845152 .color-N3{color:#9499AB;}
		.d2-1342845152 .color-N4{color:#CFD2DD;}
		.d2-1342845152 .color-N5{color:#DEE1EB;}
		.d2-1342845152 .color-N6{color:#EEF1F8;}
		.d2-1342845152 .color-N7{color:transparent;}
		.d2-1342845152 .color-B1{color:#0A0F25;}
		.d2-1342845152 .color-B2{color:#676C7E;}
		.d2-1342845152 .color-B3{color:#9499AB;}
		.d2-1342845152 .color-B4{color:#CFD2DD;}
		.d2-1342845152 .color-B5{color:#DEE1EB;}
		.d2-1342845152 .color-B6{color:#EEF1F8;}
		.d2-1342845152 .color-AA2{color:#676C7E;}
		.d2-1342845152 .color-AA4{color:#CFD2DD;}
		.d2-1342845152 .color-AA5{color:#DEE1EB;}
		.d2-1342845152 .color-AB4{color:#CFD2DD;}
		.d2-1342845152 .color-AB5{color:#DEE1EB;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:transparent;--color-canvas-subtle:#EEF1F8;--color-border-default:#0A0F25;--color-border-muted:#676C7E;--color-neutral-muted:#EEF1F8;--color-accent-fg:#676C7E;--color-accent-emphasis:#676C7E;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-B3{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-B4{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-B5{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-1342845152);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.light-code{display: block}.dark-code{display: none}@media screen and (prefers-color-scheme:dark){
		.d2-1342845152 .fill-N1{fill:#CDD6F4;}
		.d2-1342845152 .fill-N2{fill:#BAC2DE;}
		.d2-1342845152 .fill-N3{fill:#A6ADC8;}
		.d2-1342845152 .fill-N4{fill:#585B70;}
		.d2-1342845152 .fill-N5{fill:#45475A;}
		.d2-1342845152 .fill-N6{fill:#313244;}
		.d2-1342845152 .fill-N7{fill:transparent;}
		.d2-1342845152 .fill-B1{fill:#CBA6f7;}
		.d2-1342845152 .fill-B2{fill:#CBA6f7;}
		.d2-1342845152 .fill-B3{fill:#6C7086;}
		.d2-1342845152 .fill-B4{fill:#585B70;}
		.d2-1342845152 .fill-B5{fill:#45475A;}
		.d2-1342845152 .fill-B6{fill:#313244;}
		.d2-1342845152 .fill-AA2{fill:#f38BA8;}
		.d2-1342845152 .fill-AA4{fill:#45475A;}
		.d2-1342845152 .fill-AA5{fill:#313244;}
		.d2-1342845152 .fill-AB4{fill:#45475A;}
		.d2-1342845152 .fill-AB5{fill:#313244;}
		.d2-1342845152 .stroke-N1{stroke:#CDD6F4;}
		.d2-1342845152 .stroke-N2{stroke:#BAC2DE;}
		.d2-1342845152 .stroke-N3{stroke:#A6ADC8;}
		.d2-1342845152 .stroke-N4{stroke:#585B70;}
		.d2-1342845152 .stroke-N5{stroke:#45475A;}
		.d2-1342845152 .stroke-N6{stroke:#313244;}
		.d2-1342845152 .stroke-N7{stroke:transparent;}
		.d2-1342845152 .stroke-B1{stroke:#CBA6f7;}
		.d2-1342845152 .stroke-B2{stroke:#CBA6f7;}
		.d2-1342845152 .stroke-B3{stroke:#6C7086;}
		.d2-1342845152 .stroke-B4{stroke:#585B70;}
		.d2-1342845152 .stroke-B5{stroke:#45475A;}
		.d2-1342845152 .stroke-B6{stroke:#313244;}
		.d2-1342845152 .stroke-AA2{stroke:#f38BA8;}
		.d2-1342845152 .stroke-AA4{stroke:#45475A;}
		.d2-1342845152 .stroke-AA5{stroke:#313244;}
		.d2-1342845152 .stroke-AB4{stroke:#45475A;}
		.d2-1342845152 .stroke-AB5{stroke:#313244;}
		.d2-1342845152 .background-color-N1{background-color:#CDD6F4;}
		.d2-1342845152 .background-color-N2{background-color:#BAC2DE;}
		.d2-1342845152 .background-color-N3{background-color:#A6ADC8;}
		.d2-1342845152 .background-color-N4{background-color:#585B70;}
		.d2-1342845152 .background-color-N5{background-color:#45475A;}
		.d2-1342845152 .background-color-N6{background-color:#313244;}
		.d2-1342845152 .background-color-N7{background-color:transparent;}
		.d2-1342845152 .background-color-B1{background-color:#CBA6f7;}
		.d2-1342845152 .background-color-B2{background-color:#CBA6f7;}
		.d2-1342845152 .background-color-B3{background-color:#6C7086;}
		.d2-1342845152 .background-color-B4{background-color:#585B70;}
		.d2-1342845152 .background-color-B5{background-color:#45475A;}
		.d2-1342845152 .background-color-B6{background-color:#313244;}
		.d2-1342845152 .background-color-AA2{background-color:#f38BA8;}
		.d2-1342845152 .background-color-AA4{background-color:#45475A;}
		.d2-1342845152 .background-color-AA5{background-color:#313244;}
		.d2-1342845152 .background-color-AB4{background-color:#45475A;}
		.d2-1342845152 .background-color-AB5{background-color:#313244;}
		.d2-1342845152 .color-N1{color:#CDD6F4;}
		.d2-1342845152 .color-N2{color:#BAC2DE;}
		.d2-1342845152 .color-N3{color:#A6ADC8;}
		.d2-1342845152 .color-N4{color:#585B70;}
		.d2-1342845152 .color-N5{color:#45475A;}
		.d2-1342845152 .color-N6{color:#313244;}
		.d2-1342845152 .color-N7{color:transparent;}
		.d2-1342845152 .color-B1{color:#CBA6f7;}
		.d2-1342845152 .color-B2{color:#CBA6f7;}
		.d2-1342845152 .color-B3{color:#6C7086;}
		.d2-1342845152 .color-B4{color:#585B70;}
		.d2-1342845152 .color-B5{color:#45475A;}
		.d2-1342845152 .color-B6{color:#313244;}
		.d2-1342845152 .color-AA2{color:#f38BA8;}
		.d2-1342845152 .color-AA4{color:#45475A;}
		.d2-1342845152 .color-AA5{color:#313244;}
		.d2-1342845152 .color-AB4{color:#45475A;}
		.d2-1342845152 .color-AB5{color:#313244;}.appendix text.text{fill:#CDD6F4}.md{--color-fg-default:#CDD6F4;--color-fg-muted:#BAC2DE;--color-fg-subtle:#A6ADC8;--color-canvas-default:transparent;--color-canvas-subtle:#313244;--color-border-default:#CBA6f7;--color-border-muted:#CBA6f7;--color-neutral-muted:#313244;--color-accent-fg:#CBA6f7;--color-accent-emphasis:#CBA6f7;--color-attention-subtle:#BAC2DE;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-B2{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-B3{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-B4{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-B5{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-B6{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-AA2{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-AA4{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-AA5{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-AB4{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-AB5{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-N1{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-N2{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-N3{fill:url(#streaks-normal-d2-1342845152);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-dark-d2-1342845152);mix-blend-mode:overlay}.sketch-overlay-N5{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-N6{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.sketch-overlay-N7{fill:url(#streaks-darker-d2-1342845152);mix-blend-mode:lighten}.light-code{display: none}.dark-code{display: block}}]]></style><g class="U3RhdGVsZXNz"><g class="shape" ><rect x="12.000000" y="12.000000" width="284.000000" height="253.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="154.000000" y="45.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">No state (Contract 1)</text></g><g class="TXV0YXRlcw=="><g class="shape" ><rect x="466.000000" y="12.000000" width="401.000000" height="253.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="666.500000" y="45.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Mutates own state (Contract 2)</text></g><g class="UmVhZHM="><g class="shape" ><rect x="1037.000000" y="12.000000" width="322.000000" height="253.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="1198.000000" y="45.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Reads state (Contract 3)</text></g><g class="U3RhdGVsZXNzLmNvbXB1dGU="><g class="shape" ><rect x="78.000000" y="135.000000" width="151.000000" height="80.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="153.500000" y="180.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">fn compute(...)</text></g><g class="TXV0YXRlcy51cGRhdGU="><g class="shape" ><rect x="559.000000" y="135.000000" width="215.000000" height="80.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="666.500000" y="180.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">fn update(&amp;mut self, ...)</text></g><g class="UmVhZHMucmVhZA=="><g class="shape" ><rect x="1115.000000" y="135.000000" width="165.000000" height="80.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="1197.500000" y="180.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">fn read(&amp;self, ...)</text></g><g class="U3RhdGVsZXNzLihjb21wdXRlIC0mZ3Q7IGNvbXB1dGUpWzBd"><marker id="mk-d2-1342845152-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 128.832993 133.000000 L 128.832993 95.000000 S 128.832993 85.000000 138.832993 85.000000 L 169.166000 85.000000 S 179.166000 85.000000 179.166000 95.000000 L 179.166000 131.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1342845152-3488378134)" mask="url(#d2-1342845152)" /><text x="154.000000" y="91.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">✅</text></g><g class="KFN0YXRlbGVzcy5jb21wdXRlIC0mZ3Q7IE11dGF0ZXMudXBkYXRlKVswXQ=="><path d="M 231.000000 175.000000 L 555.000000 175.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1342845152-3488378134)" mask="url(#d2-1342845152)" /><text x="394.000000" y="181.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">✅</text></g><g class="TXV0YXRlcy4odXBkYXRlIC0mZ3Q7IHVwZGF0ZSlbMF0="><path d="M 630.666016 133.000000 L 630.666016 95.000000 S 630.666016 85.000000 640.666016 85.000000 L 692.333008 85.000000 S 702.333008 85.000000 702.333008 95.000000 L 702.333008 131.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1342845152-3488378134)" mask="url(#d2-1342845152)" /><text x="666.000000" y="91.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">❌</text></g><g class="KE11dGF0ZXMudXBkYXRlIC0mZ3Q7IFJlYWRzLnJlYWQpWzBd"><path d="M 775.500000 175.000000 L 1111.500000 175.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1342845152-3488378134)" mask="url(#d2-1342845152)" /><text x="945.000000" y="181.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">✅</text></g><g class="UmVhZHMuKHJlYWQgLSZndDsgcmVhZClbMF0="><path d="M 1170.500000 133.000000 L 1170.500000 95.000000 S 1170.500000 85.000000 1180.500000 85.000000 L 1215.500000 85.000000 S 1225.500000 85.000000 1225.500000 95.000000 L 1225.500000 131.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-1342845152-3488378134)" mask="url(#d2-1342845152)" /><text x="1198.000000" y="91.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">✅</text></g><mask id="d2-1342845152" maskUnits="userSpaceOnUse" x="11" y="11" width="1349" height="255">
<rect x="11" y="11" width="1349" height="255" fill="white"></rect>
<rect x="142.000000" y="75.000000" width="24" height="21" fill="black"></rect>
<rect x="382.000000" y="165.000000" width="24" height="21" fill="black"></rect>
<rect x="654.000000" y="75.000000" width="24" height="21" fill="black"></rect>
<rect x="933.000000" y="165.000000" width="24" height="21" fill="black"></rect>
<rect x="1186.000000" y="75.000000" width="24" height="21" fill="black"></rect>
</mask></svg></svg>
</pre>
<p>Such a loop will be caught and the transaction will be aborted:</p>
<pre><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-d2-version="v0.7.1" preserveAspectRatio="xMinYMin meet" viewBox="0 0 985 217"><svg class="d2-3117740729 d2-svg" width="985" height="217" viewBox="11 13 985 217"><rect x="11.000000" y="13.000000" width="985.000000" height="217.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[
.d2-3117740729 .text {
	font-family: "d2-3117740729-font-regular";
}
@font-face {
	font-family: d2-3117740729-font-regular;
	src: url("data:application/font-woff;base64,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");
}
.d2-3117740729 .text-bold {
	font-family: "d2-3117740729-font-bold";
}
@font-face {
	font-family: d2-3117740729-font-bold;
	src: url("data:application/font-woff;base64,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");
}
.d2-3117740729 .text-italic {
	font-family: "d2-3117740729-font-italic";
}
@font-face {
	font-family: d2-3117740729-font-italic;
	src: url("data:application/font-woff;base64,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");
}]]></style><style type="text/css"><![CDATA[.shape {
  shape-rendering: geometricPrecision;
  stroke-linejoin: round;
}
.connection {
  stroke-linecap: round;
  stroke-linejoin: round;
}
.blend {
  mix-blend-mode: multiply;
  opacity: 0.5;
}

		.d2-3117740729 .fill-N1{fill:#0A0F25;}
		.d2-3117740729 .fill-N2{fill:#676C7E;}
		.d2-3117740729 .fill-N3{fill:#9499AB;}
		.d2-3117740729 .fill-N4{fill:#CFD2DD;}
		.d2-3117740729 .fill-N5{fill:#DEE1EB;}
		.d2-3117740729 .fill-N6{fill:#EEF1F8;}
		.d2-3117740729 .fill-N7{fill:transparent;}
		.d2-3117740729 .fill-B1{fill:#0A0F25;}
		.d2-3117740729 .fill-B2{fill:#676C7E;}
		.d2-3117740729 .fill-B3{fill:#9499AB;}
		.d2-3117740729 .fill-B4{fill:#CFD2DD;}
		.d2-3117740729 .fill-B5{fill:#DEE1EB;}
		.d2-3117740729 .fill-B6{fill:#EEF1F8;}
		.d2-3117740729 .fill-AA2{fill:#676C7E;}
		.d2-3117740729 .fill-AA4{fill:#CFD2DD;}
		.d2-3117740729 .fill-AA5{fill:#DEE1EB;}
		.d2-3117740729 .fill-AB4{fill:#CFD2DD;}
		.d2-3117740729 .fill-AB5{fill:#DEE1EB;}
		.d2-3117740729 .stroke-N1{stroke:#0A0F25;}
		.d2-3117740729 .stroke-N2{stroke:#676C7E;}
		.d2-3117740729 .stroke-N3{stroke:#9499AB;}
		.d2-3117740729 .stroke-N4{stroke:#CFD2DD;}
		.d2-3117740729 .stroke-N5{stroke:#DEE1EB;}
		.d2-3117740729 .stroke-N6{stroke:#EEF1F8;}
		.d2-3117740729 .stroke-N7{stroke:transparent;}
		.d2-3117740729 .stroke-B1{stroke:#0A0F25;}
		.d2-3117740729 .stroke-B2{stroke:#676C7E;}
		.d2-3117740729 .stroke-B3{stroke:#9499AB;}
		.d2-3117740729 .stroke-B4{stroke:#CFD2DD;}
		.d2-3117740729 .stroke-B5{stroke:#DEE1EB;}
		.d2-3117740729 .stroke-B6{stroke:#EEF1F8;}
		.d2-3117740729 .stroke-AA2{stroke:#676C7E;}
		.d2-3117740729 .stroke-AA4{stroke:#CFD2DD;}
		.d2-3117740729 .stroke-AA5{stroke:#DEE1EB;}
		.d2-3117740729 .stroke-AB4{stroke:#CFD2DD;}
		.d2-3117740729 .stroke-AB5{stroke:#DEE1EB;}
		.d2-3117740729 .background-color-N1{background-color:#0A0F25;}
		.d2-3117740729 .background-color-N2{background-color:#676C7E;}
		.d2-3117740729 .background-color-N3{background-color:#9499AB;}
		.d2-3117740729 .background-color-N4{background-color:#CFD2DD;}
		.d2-3117740729 .background-color-N5{background-color:#DEE1EB;}
		.d2-3117740729 .background-color-N6{background-color:#EEF1F8;}
		.d2-3117740729 .background-color-N7{background-color:transparent;}
		.d2-3117740729 .background-color-B1{background-color:#0A0F25;}
		.d2-3117740729 .background-color-B2{background-color:#676C7E;}
		.d2-3117740729 .background-color-B3{background-color:#9499AB;}
		.d2-3117740729 .background-color-B4{background-color:#CFD2DD;}
		.d2-3117740729 .background-color-B5{background-color:#DEE1EB;}
		.d2-3117740729 .background-color-B6{background-color:#EEF1F8;}
		.d2-3117740729 .background-color-AA2{background-color:#676C7E;}
		.d2-3117740729 .background-color-AA4{background-color:#CFD2DD;}
		.d2-3117740729 .background-color-AA5{background-color:#DEE1EB;}
		.d2-3117740729 .background-color-AB4{background-color:#CFD2DD;}
		.d2-3117740729 .background-color-AB5{background-color:#DEE1EB;}
		.d2-3117740729 .color-N1{color:#0A0F25;}
		.d2-3117740729 .color-N2{color:#676C7E;}
		.d2-3117740729 .color-N3{color:#9499AB;}
		.d2-3117740729 .color-N4{color:#CFD2DD;}
		.d2-3117740729 .color-N5{color:#DEE1EB;}
		.d2-3117740729 .color-N6{color:#EEF1F8;}
		.d2-3117740729 .color-N7{color:transparent;}
		.d2-3117740729 .color-B1{color:#0A0F25;}
		.d2-3117740729 .color-B2{color:#676C7E;}
		.d2-3117740729 .color-B3{color:#9499AB;}
		.d2-3117740729 .color-B4{color:#CFD2DD;}
		.d2-3117740729 .color-B5{color:#DEE1EB;}
		.d2-3117740729 .color-B6{color:#EEF1F8;}
		.d2-3117740729 .color-AA2{color:#676C7E;}
		.d2-3117740729 .color-AA4{color:#CFD2DD;}
		.d2-3117740729 .color-AA5{color:#DEE1EB;}
		.d2-3117740729 .color-AB4{color:#CFD2DD;}
		.d2-3117740729 .color-AB5{color:#DEE1EB;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:transparent;--color-canvas-subtle:#EEF1F8;--color-border-default:#0A0F25;--color-border-muted:#676C7E;--color-neutral-muted:#EEF1F8;--color-accent-fg:#676C7E;--color-accent-emphasis:#676C7E;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-B3{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-B4{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-B5{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-AA5{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-AB5{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright-d2-3117740729);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.light-code{display: block}.dark-code{display: none}@media screen and (prefers-color-scheme:dark){
		.d2-3117740729 .fill-N1{fill:#CDD6F4;}
		.d2-3117740729 .fill-N2{fill:#BAC2DE;}
		.d2-3117740729 .fill-N3{fill:#A6ADC8;}
		.d2-3117740729 .fill-N4{fill:#585B70;}
		.d2-3117740729 .fill-N5{fill:#45475A;}
		.d2-3117740729 .fill-N6{fill:#313244;}
		.d2-3117740729 .fill-N7{fill:transparent;}
		.d2-3117740729 .fill-B1{fill:#CBA6f7;}
		.d2-3117740729 .fill-B2{fill:#CBA6f7;}
		.d2-3117740729 .fill-B3{fill:#6C7086;}
		.d2-3117740729 .fill-B4{fill:#585B70;}
		.d2-3117740729 .fill-B5{fill:#45475A;}
		.d2-3117740729 .fill-B6{fill:#313244;}
		.d2-3117740729 .fill-AA2{fill:#f38BA8;}
		.d2-3117740729 .fill-AA4{fill:#45475A;}
		.d2-3117740729 .fill-AA5{fill:#313244;}
		.d2-3117740729 .fill-AB4{fill:#45475A;}
		.d2-3117740729 .fill-AB5{fill:#313244;}
		.d2-3117740729 .stroke-N1{stroke:#CDD6F4;}
		.d2-3117740729 .stroke-N2{stroke:#BAC2DE;}
		.d2-3117740729 .stroke-N3{stroke:#A6ADC8;}
		.d2-3117740729 .stroke-N4{stroke:#585B70;}
		.d2-3117740729 .stroke-N5{stroke:#45475A;}
		.d2-3117740729 .stroke-N6{stroke:#313244;}
		.d2-3117740729 .stroke-N7{stroke:transparent;}
		.d2-3117740729 .stroke-B1{stroke:#CBA6f7;}
		.d2-3117740729 .stroke-B2{stroke:#CBA6f7;}
		.d2-3117740729 .stroke-B3{stroke:#6C7086;}
		.d2-3117740729 .stroke-B4{stroke:#585B70;}
		.d2-3117740729 .stroke-B5{stroke:#45475A;}
		.d2-3117740729 .stroke-B6{stroke:#313244;}
		.d2-3117740729 .stroke-AA2{stroke:#f38BA8;}
		.d2-3117740729 .stroke-AA4{stroke:#45475A;}
		.d2-3117740729 .stroke-AA5{stroke:#313244;}
		.d2-3117740729 .stroke-AB4{stroke:#45475A;}
		.d2-3117740729 .stroke-AB5{stroke:#313244;}
		.d2-3117740729 .background-color-N1{background-color:#CDD6F4;}
		.d2-3117740729 .background-color-N2{background-color:#BAC2DE;}
		.d2-3117740729 .background-color-N3{background-color:#A6ADC8;}
		.d2-3117740729 .background-color-N4{background-color:#585B70;}
		.d2-3117740729 .background-color-N5{background-color:#45475A;}
		.d2-3117740729 .background-color-N6{background-color:#313244;}
		.d2-3117740729 .background-color-N7{background-color:transparent;}
		.d2-3117740729 .background-color-B1{background-color:#CBA6f7;}
		.d2-3117740729 .background-color-B2{background-color:#CBA6f7;}
		.d2-3117740729 .background-color-B3{background-color:#6C7086;}
		.d2-3117740729 .background-color-B4{background-color:#585B70;}
		.d2-3117740729 .background-color-B5{background-color:#45475A;}
		.d2-3117740729 .background-color-B6{background-color:#313244;}
		.d2-3117740729 .background-color-AA2{background-color:#f38BA8;}
		.d2-3117740729 .background-color-AA4{background-color:#45475A;}
		.d2-3117740729 .background-color-AA5{background-color:#313244;}
		.d2-3117740729 .background-color-AB4{background-color:#45475A;}
		.d2-3117740729 .background-color-AB5{background-color:#313244;}
		.d2-3117740729 .color-N1{color:#CDD6F4;}
		.d2-3117740729 .color-N2{color:#BAC2DE;}
		.d2-3117740729 .color-N3{color:#A6ADC8;}
		.d2-3117740729 .color-N4{color:#585B70;}
		.d2-3117740729 .color-N5{color:#45475A;}
		.d2-3117740729 .color-N6{color:#313244;}
		.d2-3117740729 .color-N7{color:transparent;}
		.d2-3117740729 .color-B1{color:#CBA6f7;}
		.d2-3117740729 .color-B2{color:#CBA6f7;}
		.d2-3117740729 .color-B3{color:#6C7086;}
		.d2-3117740729 .color-B4{color:#585B70;}
		.d2-3117740729 .color-B5{color:#45475A;}
		.d2-3117740729 .color-B6{color:#313244;}
		.d2-3117740729 .color-AA2{color:#f38BA8;}
		.d2-3117740729 .color-AA4{color:#45475A;}
		.d2-3117740729 .color-AA5{color:#313244;}
		.d2-3117740729 .color-AB4{color:#45475A;}
		.d2-3117740729 .color-AB5{color:#313244;}.appendix text.text{fill:#CDD6F4}.md{--color-fg-default:#CDD6F4;--color-fg-muted:#BAC2DE;--color-fg-subtle:#A6ADC8;--color-canvas-default:transparent;--color-canvas-subtle:#313244;--color-border-default:#CBA6f7;--color-border-muted:#CBA6f7;--color-neutral-muted:#313244;--color-accent-fg:#CBA6f7;--color-accent-emphasis:#CBA6f7;--color-attention-subtle:#BAC2DE;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-B2{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-B3{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-B4{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-B5{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-B6{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-AA2{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-AA4{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-AA5{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-AB4{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-AB5{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-N1{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-N2{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-N3{fill:url(#streaks-normal-d2-3117740729);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-dark-d2-3117740729);mix-blend-mode:overlay}.sketch-overlay-N5{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-N6{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.sketch-overlay-N7{fill:url(#streaks-darker-d2-3117740729);mix-blend-mode:lighten}.light-code{display: none}.dark-code{display: block}}]]></style><g class="TXV0YXRlcw=="><g class="shape" ><rect x="57.000000" y="63.000000" width="401.000000" height="166.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="257.500000" y="96.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Mutates own state (Contract 1)</text></g><g class="UmVhZHM="><g class="shape" ><rect x="628.000000" y="63.000000" width="322.000000" height="166.000000" class=" stroke-B1 fill-B4" style="stroke-width:2;" /></g><text x="789.000000" y="96.000000" class="text fill-N1" style="text-anchor:middle;font-size:28px">Reads state (Contract 2)</text></g><g class="TXV0YXRlcy51cGRhdGU="><g class="shape" ><rect x="150.000000" y="113.000000" width="215.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="257.500000" y="151.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">fn update(&amp;mut self, ...)</text></g><g class="UmVhZHMucmVhZA=="><g class="shape" ><rect x="706.000000" y="113.000000" width="165.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="788.500000" y="151.500000" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">fn read(&amp;self, ...)</text></g><g class="KE11dGF0ZXMudXBkYXRlIC0mZ3Q7IFJlYWRzLnJlYWQpWzBd"><marker id="mk-d2-3117740729-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 366.500000 146.000000 L 702.500000 146.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-3117740729-3488378134)" mask="url(#d2-3117740729)" /><text x="536.000000" y="152.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">✅</text><text x="387.000000" y="135.000000" class="text-italic fill-N1" style="text-anchor:middle;font-size:16px">Start</text></g><g class="KFJlYWRzLnJlYWQgLSZndDsgTXV0YXRlcy51cGRhdGUpWzBd"><path d="M 873.000000 146.000000 L 985.000000 146.000000 S 995.000000 146.000000 995.000000 136.000000 L 995.000000 33.000000 S 995.000000 23.000000 985.000000 23.000000 L 22.000000 23.000000 S 12.000000 23.000000 12.000000 33.000000 L 12.000000 136.000000 S 12.000000 146.000000 22.000000 146.000000 L 146.000000 146.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-d2-3117740729-3488378134)" mask="url(#d2-3117740729)" /><text x="497.000000" y="29.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">❌</text></g><mask id="d2-3117740729" maskUnits="userSpaceOnUse" x="11" y="13" width="985" height="217">
<rect x="11" y="13" width="985" height="217" fill="white"></rect>
<rect x="524.000000" y="136.000000" width="24" height="21" fill="black"></rect>
<rect x="485.000000" y="13.000000" width="24" height="21" fill="black"></rect>
</mask></svg></svg>
</pre>
<div style="break-before: page; page-break-before: always;"></div><style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="how-can-you-help"><a class="header" href="#how-can-you-help">How can you help?</a></h1>
<p>There are a number of things that are being worked on, but there are also things that we’d really like some help with or
to collaborate on. If any of this is interesting to you, join our <a href="https://abundance.zulipchat.com/">Zulip</a> chat and let’s discuss it. The list will be
expanded over time.</p>
<p>If you have ideas that are not mentioned below, feel free to reach out and share them.</p>
<p>There may or may not be funding available for these things.</p>
<h2 id="permissionless-shard-assignment"><a class="header" href="#permissionless-shard-assignment">Permissionless shard assignment</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Research</p>
</div>
<div class="mdbook-alerts mdbook-alerts-important">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  important
</p>
<p>WIP</p>
</div>
<p>In a sharded blockchain, we need an algorithm for assignment farmers to shards. The algorithm must be fully
permissionless, also, ideally, distributing farmers uniformly across all shards.</p>
<p>The important observation is that farmers have to plot before they can participate in consensus. This means it is both
permissionless (unlike PoS) and requires some work being done beforehand, while the majority of the time farming is very
energy-efficient (unlike PoW). This also provides inertia that isn’t present in PoW where miners can quickly switch
between networks and services like Nicehash can be used to attack the network for short periods of time fairly
inexpensively.</p>
<p>The idea is that it might be possible to assign plots to shards based on their identity and rotate around at some rate
based on on-chain randomness. The size of a single plot is conceptually capped at ~65 TiB, also pieces expire over time
as blockchain history growths (half of the plot expires every time history doubles in Subspace). Expiration in Subspace
is implemented by farmers committing sectors (that plots are composed of) to a specific history size (which determines
selection of pieces from the archived history).</p>
<p>The intuition is that there might be a way to implement PoS-like rotation while leveraging the fact that an effort needs
to be spent upfront to even be able to try to produce a block on a shard. Basis requirements are as follows:</p>
<ul>
<li>Fully permissionless, no on-chain registration</li>
<li>Uniform distribution of farmers (plotted space) among shards</li>
<li>Rotation between shards over time to prevent malicious majority forming on any particular shard for consensus purposes</li>
<li>Simple, straightforward to analyze and implement (probably based on consistent hashing)</li>
</ul>
<h2 id="risc-v-vm"><a class="header" href="#risc-v-vm">RISC-V VM</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Mostly engineering</p>
</div>
<p>We need a RISC-V VM. The basic requirements are as follows:</p>
<ul>
<li>Supports an ELF shared library as its input format, must be able to run it straight after compiler without any
additional processing</li>
<li>Able to run RV64E code with popular extensions (probably RV64EMAC to start, adding vector and cryptographic extensions
afterward)</li>
<li>Runs in a secure minimal sandbox (like seccomp, possibly in a hardware-accelerated VM)</li>
<li>Cross-platform (Linux, macOS and Windows) deterministic execution</li>
<li>Has low overhead gas metering</li>
<li>High performance (~50% of native speed is highly desirable, which includes gas metering)</li>
<li>Low memory usage</li>
<li>Quick instantiations to support cheap and frequent cross-contract calls</li>
</ul>
<p><a href="https://github.com/paritytech/polkavm">PolkaVM</a> satisfies some requirements above, but not all and doesn’t 100% align
in its design goals, but there might be an opportunity for collaboration.</p>
<h2 id="state-database"><a class="header" href="#state-database">State database</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Research informed by engineering constraints</p>
</div>
<p>We need a special state database. Since consensus nodes do not store the state itself (it is not mandatory), but rather
store hashes, one per account, we have quite unique database requirements, and it must be possible to exploit them for
better performance.</p>
<p>Here are the key requirements:</p>
<ul>
<li>Key-value database</li>
<li>All keys are monotonically increasing 128-bit unsigned integers</li>
<li>It is extremely likely that many keys will be close to each other (most will be exactly next to each other)</li>
<li>All values are tiny, constant size, less than 100 bytes</li>
<li>Verifiable, entries form a Sparse Merkle Tree, whose root is the state root</li>
<li>Efficiently updatable (including update of the Merkle Root)</li>
<li>Reasonably efficiently provable</li>
<li>Optimized for modern NVMe SSDs (concurrent random reads, sequential batch writes)</li>
<li>Should use low to moderate amount of RAM</li>
<li>Nice if supports versioning, but not mandatory</li>
<li>Very, very fast</li>
</ul>
<p>By very fast, I mean that it should ideally support hundreds of thousands of operations on modern SSDs, productively
leveraging IOPS available.</p>
<p>Specifically, note that we don’t need variable sized keys, values are constant size as well. Keys are not uniformly and
randomly distributed throughout the key space, instead a lot (most) of them will be right next to each other.</p>
<p>Also, most blockchains support state versioning at various depths, here we just need 100 blocks max. I suspect we can
store the diff in RAM or apply directly, while keeping separate “rollback details” rather than supporting proper
versions of the whole tree be readily available at any time.</p>
<p>With such constraints, I think there should be something really simple and efficient out there either implemented (less
likely) or at least designed in a paper or something (more likely).</p>
<h2 id="p2p-networking-stack"><a class="header" href="#p2p-networking-stack">P2P networking stack</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Research/engineering</p>
</div>
<p>We need a P2P networking stack. There is a prototype already, but it’ll need to be expanded significantly with sharding
and blockchain needs in mind. Some requirements:</p>
<ul>
<li>TCP-based</li>
<li>Likely libp2p-based (strictly speaking, not a hard requirement, but very desirable for interoperability)</li>
<li>Low overhead and high performance</li>
<li>Zero-copy whenever possible</li>
<li>Support for custom gossip protocols (block and transaction propagation, proof-of-time notifications)</li>
<li>Support for both structured (for distributed storage network) and unstructured (for blockchain) architecture</li>
</ul>
<p>There is a networking stack inherited from <a href="https://github.com/autonomys/subspace">Subspace reference implementation</a>, which is focused on distributed storage
network needs. It generally works, though bootstrapping time and downloading speeds can be improved. It will likely need
to be upgraded with support for various blockchain needs that were previously provided by <a href="https://github.com/paritytech/polkadot-sdk/tree/master/substrate">Substrate</a> framework, but
will have to be reimplemented differently.</p>
<h2 id="funding-model-for-core-contributors"><a class="header" href="#funding-model-for-core-contributors">Funding model for core contributors</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Research</p>
</div>
<p>It would be really nice to find a sustainable funding model for core contributors and valuable community members. Here
are some requirements:</p>
<ul>
<li>Fully on chain without legal entities and jurisdiction constraints</li>
<li>Ability to discover and reward valuable contributions without relying on committees/governance</li>
<li>Ideally P2P or using small DAOs</li>
</ul>
<p>The first thing that comes to mind is having multiple rewards addresses specified during farming, with a specified
portion of rewards probabilistically ending up in a wallet of the developer/contributor that farmer wants to support.
This doesn’t solve the problem of discoverability though. One way or another, there should not be a big
treasury/governance structure that is responsible for managing funds, it should be more direct and more distributed.</p>
<h2 id="gpu-plotting"><a class="header" href="#gpu-plotting">GPU plotting</a></h2>
<div class="mdbook-alerts mdbook-alerts-note">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  note
</p>
<p>Engineering</p>
</div>
<div class="mdbook-alerts mdbook-alerts-important">
<p class="mdbook-alerts-title">
  <span class="mdbook-alerts-icon"></span>
  important
</p>
<p>WIP</p>
</div>
<p>GPU plotting was inherited from <a href="https://github.com/autonomys/subspace">Subspace reference implementation</a>, but due to getting rid of KZG it is temporarily a
bit broken.</p>
<p>It is being <a href="https://github.com/nazar-pc/abundance/tree/2862d4ae59b60000e020bcbf38c4dcbd9a74f10e/crates/farmer/ab-proof-of-space-gpu">re-written in Rust</a> using <a href="https://github.com/Rust-GPU/rust-gpu">rust-gpu</a> with the goal of running on Vulkan 1.2-capable devices (plus Metal on
macOS), which includes both dGPUs from different vendors and iGPUs (which due to unified memory could benefit from extra
memory-related optimizations). This should make plotting less expensive and hopefully even make farming viable on larger
SBCs.</p>
<div style="break-before: page; page-break-before: always;"></div><style>
.mdbook-alerts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-left: 0.25em solid var(--mdbook-alerts-color);
}

.mdbook-alerts > *:first-child {
  margin-top: 0;
}

.mdbook-alerts > *:last-child {
  margin-bottom: 0;
}

.mdbook-alerts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-alerts-color);
  text-transform: capitalize;
}

.mdbook-alerts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-alerts-icon);
  mask-image: var(--mdbook-alerts-icon);
}

.mdbook-alerts-note {
  --mdbook-alerts-color: rgb(9, 105, 218);
  /* https://icon-sets.iconify.design/material-symbols/info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11q-.425 0-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8q0 .425.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12q0-3.35-2.325-5.675T12 4Q8.65 4 6.325 6.325T4 12q0 3.35 2.325 5.675T12 20m0-8"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-tip {
  --mdbook-alerts-color: rgb(26, 127, 55);
  /* https://icon-sets.iconify.design/material-symbols/lightbulb-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 22q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-3-3q-.425 0-.712-.288T8 18q0-.425.288-.712T9 17h6q.425 0 .713.288T16 18q0 .425-.288.713T15 19zm-.75-3q-1.725-1.025-2.738-2.75T4.5 9.5q0-3.125 2.188-5.312T12 2q3.125 0 5.313 2.188T19.5 9.5q0 2.025-1.012 3.75T15.75 16zm.6-2h6.3q1.125-.8 1.738-1.975T17.5 9.5q0-2.3-1.6-3.9T12 4Q9.7 4 8.1 5.6T6.5 9.5q0 1.35.613 2.525T8.85 14M12 14"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-important {
  --mdbook-alerts-color: rgb(130, 80, 223);
  /* https://icon-sets.iconify.design/material-symbols/chat-info-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 7q.425 0 .713-.288T13 6q0-.425-.288-.712T12 5q-.425 0-.712.288T11 6q0 .425.288.713T12 7m0 8q.425 0 .713-.288T13 14v-4q0-.425-.288-.712T12 9q-.425 0-.712.288T11 10v4q0 .425.288.713T12 15m-6 3l-2.3 2.3q-.475.475-1.088.213T2 19.575V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-.85-2H20V4H4v13.125zM4 16V4z"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-warning {
  --mdbook-alerts-color: rgb(154, 103, 0);
  /* https://icon-sets.iconify.design/material-symbols/warning-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M2.725 21q-.275 0-.5-.137t-.35-.363q-.125-.225-.137-.488t.137-.512l9.25-16q.15-.25.388-.375T12 3q.25 0 .488.125t.387.375l9.25 16q.15.25.138.513t-.138.487q-.125.225-.35.363t-.5.137zm1.725-2h15.1L12 6zM12 18q.425 0 .713-.288T13 17q0-.425-.288-.712T12 16q-.425 0-.712.288T11 17q0 .425.288.713T12 18m0-3q.425 0 .713-.288T13 14v-3q0-.425-.288-.712T12 10q-.425 0-.712.288T11 11v3q0 .425.288.713T12 15m0-2.5"%2F%3E%3C%2Fsvg%3E');
}

.mdbook-alerts-caution {
  --mdbook-alerts-color: rgb(207, 34, 46);
  /* https://icon-sets.iconify.design/material-symbols/brightness-alert-outline-rounded/ */
  --mdbook-alerts-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 17q.425 0 .713-.288T13 16q0-.425-.288-.712T12 15q-.425 0-.712.288T11 16q0 .425.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7q-.425 0-.712.288T11 8v4q0 .425.288.713T12 13m-3.35 7H6q-.825 0-1.412-.587T4 18v-2.65L2.075 13.4q-.275-.3-.425-.662T1.5 12q0-.375.15-.737t.425-.663L4 8.65V6q0-.825.588-1.412T6 4h2.65l1.95-1.925q.3-.275.663-.425T12 1.5q.375 0 .738.15t.662.425L15.35 4H18q.825 0 1.413.588T20 6v2.65l1.925 1.95q.275.3.425.663t.15.737q0 .375-.15.738t-.425.662L20 15.35V18q0 .825-.587 1.413T18 20h-2.65l-1.95 1.925q-.3.275-.662.425T12 22.5q-.375 0-.737-.15t-.663-.425zm.85-2l2.5 2.5l2.5-2.5H18v-3.5l2.5-2.5L18 9.5V6h-3.5L12 3.5L9.5 6H6v3.5L3.5 12L6 14.5V18zm2.5-6"%2F%3E%3C%2Fsvg%3E');
}

</style>
<h1 id="acknowledgements"><a class="header" href="#acknowledgements">Acknowledgements</a></h1>
<p>There are a lot of individuals and organizations that helped the project along the way. This page aims to have a short
high-level summary, but it is by no means exhaustive and will be expanded in the future.</p>
<ul>
<li><a href="https://www.linkedin.com/company/autonomys/">Subspace Labs (now Autonomys Labs)</a> - Original research and implementation of the Subspace protocol, which is the
foundation of the work done here. Especially research and protocol engineering teams, without which all this may have
not been possible, you rock!</li>
<li><a href="https://subspace.foundation/">Subspace Foundation</a> - Financial and HR support for bootstrapping research and experimentation beyond original
Subspace design, while providing complete freedom to choose what to work on. It would be much harder to make progress
early on without this sponsorship.</li>
<li><a href="https://zulip.com/">Zulip</a> - Generously sponsoring free access to “Zulip Cloud Standard” plan for us and other Open Source projects.
Zulip is an organized team chat app designed for efficient communication.</li>
<li>Open Source community - Seriously, there are thousands of high-quality dependencies used effortlessly, and it would be
physically impossible to implement all of it alone from scratch, certainly not with the same or better level of
quality. This is a modern-day miracle that we have so much code sharing.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
